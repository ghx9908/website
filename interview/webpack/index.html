<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-interview docs-doc-id-webpack">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">webpack 面试题题 | 我的前端知识库</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://ghx9908.github.io/website/interview/webpack"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-interview-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-interview-current"><meta data-rh="true" property="og:title" content="webpack 面试题题 | 我的前端知识库"><meta data-rh="true" name="description" content="Webpack 和 rollup 区别"><meta data-rh="true" property="og:description" content="Webpack 和 rollup 区别"><link data-rh="true" rel="icon" href="/website/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://ghx9908.github.io/website/interview/webpack"><link data-rh="true" rel="alternate" href="https://ghx9908.github.io/website/interview/webpack" hreflang="en"><link data-rh="true" rel="alternate" href="https://ghx9908.github.io/website/interview/webpack" hreflang="x-default"><link rel="stylesheet" href="/website/assets/css/styles.9275129b.css">
<link rel="preload" href="/website/assets/js/runtime~main.4c7aaea7.js" as="script">
<link rel="preload" href="/website/assets/js/main.a68dfd6a.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/website/"><div class="navbar__logo"><img src="/website/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/website/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">我的前端知识库</b></a><a class="navbar__item navbar__link" href="/website/engineering/intro">前端工程化</a><a class="navbar__item navbar__link" href="/website/node/intro">Node核心</a><a class="navbar__item navbar__link" href="/website/react/intro">React</a><a class="navbar__item navbar__link" href="/website/vue/intro">Vue</a><a class="navbar__item navbar__link" href="/website/leetcode/intro">Leectode</a><a class="navbar__item navbar__link" href="/website/design/intro">Design</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/website/interview/intro">Interview</a></div><div class="navbar__items navbar__items--right"><a href="https://ghx9908.github.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blog</a><a href="https://github.com/ghx9908" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/website/interview/intro">序言</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/website/interview/H5C3">H5C3</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/website/interview/JavaScript">js面试题</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/website/interview/ES6">ES6</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/website/interview/node">node面试题</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/website/interview/webpack">webpack 面试题题</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/website/interview/05vue">vue面试题</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/website/interview/06react">react 面试题</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/website/interview/category/计算机网络">计算机网络</a><button aria-label="Toggle the collapsible sidebar category &#x27;计算机网络&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/website/interview/07TypeScript">TypeScript</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/website/interview/08浏览器">浏览器</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/website/interview/09git">git</a></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/website/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">webpack 面试题题</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>webpack 面试题题</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="webpack-和-rollup-区别">Webpack 和 rollup 区别<a class="hash-link" href="#webpack-和-rollup-区别" title="Direct link to heading">​</a></h2><ul><li>Webpack 的功能丰富，生态比 rollup 更加完善，基本所有可配置环节都做成了可配置，极度灵活，但也造成了学习成本高，配置复杂的缺点。而 rollup 使用起来简单，只需要针对处理加入不同的 plugins 即可。</li><li>webpack 打包产物会加入处理代码，导致代码体积变大，rollup 基本只对代码进行转换和整合，打包之后产物更小巧。</li><li>Rollup 是基于 es module 实现的，es module 的静态解析使得 rollup 原生支持 tree-shaking；webpack2 开始支持且消除效果不好，webpack5 支持更好的 tree-shaking。</li><li>Rollup 不支持 hmr。</li></ul><p>通过对比可以发现：</p><p>在开发应用时，我们要面对各种文件类型打包和代码优化需求，webpack 强大的可配置性和生态更具优势。</p><p>如果我们只是构建第三方库，对打包没有那么高的要求，rollup 小巧且配置简单，并且良好的 tree-shaking 支持更加适合</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="modulechunkbundle">module，chunk，bundle<a class="hash-link" href="#modulechunkbundle" title="Direct link to heading">​</a></h2><ul><li>module：在Webpack中，一个模块是指一个文件。Webpack会将所有文件都看成是模块，然后将其打包成一份JavaScript文件。Webpack将每个模块视为一个单独的个体，每个模块都可以有自己的依赖和输出。</li><li>chunk：一个chunk是由多个模块组合而成的。当Webpack打包时，会根据各个模块之间的依赖关系将它们分配到不同的chunk中。一个chunk包含了多个模块，这些模块之间可以互相依赖，但是不同的chunk之间是不能有依赖关系的。</li><li>bundle：bundle是Webpack打包后生成的文件，包含了多个chunk。一个bundle可以是一个或多个chunk的集合，通常是一个JavaScript文件，用于在浏览器中执行。一个bundle包含了所有的模块和它们之间的依赖关系。</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="优缺点">优缺点<a class="hash-link" href="#优缺点" title="Direct link to heading">​</a></h2><p><strong>Webpack的优点主要包括：</strong></p><ol><li><strong>支持多种文件类型</strong>的打包，包括JS、CSS、图片、字体等。</li><li>可以通过<strong>插件机制进行扩</strong>展，满足不同项目的需求。</li><li><strong>支持代码分割，可以实现按需加载。</strong></li><li><strong>支持热更新</strong>，可以提高开发效率。</li><li><strong>支持 Tree Shaking，可以移除未使用的代码</strong>，减小文件体积。</li></ol><p><strong>抛弃Webpack的原因可能包括：</strong></p><ol><li><strong>配置复杂</strong>。Webpack的配置相对复杂，需要深入了解其原理才能进行优化和调试。</li><li>构<strong>建速度慢</strong>。在大型项目中，Webpack的构建速度可能会受到影响，特别是在开启多个Loader和Plugin时。</li><li><strong>体积较大</strong>。Webpack本身的体积较大，可能会影响项目的启动速度和性能。</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="工作流">工作流<a class="hash-link" href="#工作流" title="Direct link to heading">​</a></h2><p><img loading="lazy" src="https://raw.githubusercontent.com/ghx9908/image-hosting/master/img/20230302105130.png" alt="image-20230327233826194" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="初始化参数"><strong>初始化参数：</strong><a class="hash-link" href="#初始化参数" title="Direct link to heading">​</a></h4><ol><li><strong>初始化参数</strong>：从配置文件和 Shell 语句中读取并合并参数,得出最终的配置对象（命令行优先级高）</li></ol><h4 class="anchor anchorWithStickyNavbar_LWe7" id="开始编译"><strong>开始编译</strong><a class="hash-link" href="#开始编译" title="Direct link to heading">​</a></h4><ol><li>用上一步得到的参数<strong>初始化 Compiler 对象</strong><ol><li>初始化 options 参数和 hooks （<code> run: new SyncHook()</code>, //在开始编译之前调用...）</li></ol></li><li><strong>加载</strong>所有配置的<strong>插件</strong>：<ol><li>在配置中找到 plugins 数组</li><li>遍历 plugins 执行每个插件的 apply 方法，并把 compiler 实例传进去（每个插件都有一个 apply 方法）</li><li>执行<code> compiler.hooks.run.tap</code>等方法注册事件</li></ol></li><li><strong>执行</strong><code>compiler</code>实例的 <strong>run 方法</strong>开始执行编译<ol><li>整个过程伴随着触发插件的注册个各种钩子函数<code> this.hooks.done.call()</code>...</li><li>开启一次新的编译，创建一个新的 Compilation 实例</li><li>执行实例的 build 方法，传入完成的回调</li></ol></li></ol><h4 class="anchor anchorWithStickyNavbar_LWe7" id="编译模块根据配置中的-entry-找出入口文件"><strong>编译模块</strong>根据配置中的 entry 找出入口文件<a class="hash-link" href="#编译模块根据配置中的-entry-找出入口文件" title="Direct link to heading">​</a></h4><ol><li><ol><li>格式化入口文件，变成对象形式</li><li>对入口进行遍历，获取入口文件的绝对路径，添加到文件依赖列表中</li></ol></li><li><p><strong>loader 转换</strong>：从入口文件出发,调用所有配置的 Loader 对模块进行转换 （最终返回 module 对象）</p><ol><li><p>读取处理文件的内容</p></li><li><p>根据规则找到所有的匹配的 loader</p></li><li><p>调用所有配置的 Loader 对模块进行转换（从上到下，从右向左）</p></li><li><p>获取当前模块模块 id，相对于根目录的相对路径</p></li><li><p>创建一个 module 对象</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> module </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">id</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&#x27;./src/entry1.js&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token comment" style="color:#999988;font-style:italic">//相对于根目录的相对路径</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token literal-property property" style="color:#36acaa">dependencies</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token literal-property property" style="color:#36acaa">depModuleId</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">.</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">src</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">title</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">js</span><span class="token punctuation" style="color:#393A34">,</span><span class="token literal-property property" style="color:#36acaa">depModulePath</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&#x27;xxx&#x27;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token comment" style="color:#999988;font-style:italic">//dependencies就是此模块依赖的模块</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">names</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;entry1&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token comment" style="color:#999988;font-style:italic">// name是模块所属的代码块的名称,如果一个模块属于多个代码块，那么name就是一个数组</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">2.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token literal-property property" style="color:#36acaa">_source</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&#x27;xxx&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token comment" style="color:#999988;font-style:italic">//存放对应的源码</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ol></li></ol><ol start="3"><li><p><strong>编译模块分析依赖</strong>，再<strong>递归遍历</strong>本步骤直到所有入口<strong>依赖模块</strong>的文件都经过了本步骤的处理</p><ol><li>将 loader 编译后的代码调用 parse 转换为 ast</li><li>遍历语法树，如果存在 require 或者 import，说明就要依赖一个其它模块</li><li>获取依赖模块的绝对路径，添加到文件依赖列表中</li><li>获取此依赖的模块的 ID, 也就是相对于根目录的相对路径</li><li>修改语法树，把依赖的模块名换成模块 ID</li><li>把依赖的模块 ID 和依赖的模块路径放置到当前模块 module 的依赖数组中</li><li>调用 generator（ast），把转换后的源码放在 module._source 属性,用于后面写入文件</li><li>遍历<code>module.dependencies</code>，递归构建 module，构建好的存储到 this.modules 上，如果第二个入口也依赖该模块，直接取用，只需要给该模块的 name 属性上添加上入口信息</li></ol></li></ol><h4 class="anchor anchorWithStickyNavbar_LWe7" id="输出资源"><strong>输出资源</strong><a class="hash-link" href="#输出资源" title="Direct link to heading">​</a></h4><ol><li><p><strong>组装 chuck 对象：</strong></p><ol><li>组装</li></ol><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> chuck </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;entry1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//入口名称</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  entryModule</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//入口的模块的module {id,name,dependencies,_source}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">modules</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 入口依赖模块的集合</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ol><ol><li><code>this.chunks.push(chunk)</code></li></ol><h4 class="anchor anchorWithStickyNavbar_LWe7" id="生成-bundle-文件">生成 bundle 文件<a class="hash-link" href="#生成-bundle-文件" title="Direct link to heading">​</a></h4><ol><li>把每个 Chunk 转换成一个单独的文件加入到输出列表<ol><li>获取要生成的文件名称并把文件名添加到 this.files 中</li><li>获取文件内容并给 this.assets 对象</li><li>执行 <code>compilation.build</code> 方法的回调</li></ol></li></ol><h4 class="anchor anchorWithStickyNavbar_LWe7" id="写入文件">写入文件<a class="hash-link" href="#写入文件" title="Direct link to heading">​</a></h4><ol><li>在确定好输出内容后，根据配置确定输出的路径和文件名，把文件内容写入到文件系统</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="loader">Loader<a class="hash-link" href="#loader" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="11-概念">1.1 概念<a class="hash-link" href="#11-概念" title="Direct link to heading">​</a></h3><ul><li>所谓 loader 只是一个导出为函数的 JavaScript 模块。它接收上一个 loader 产生的结果或者资源文件(resource file)作为入参。也可以用多个 loader 函数组成 loader chain</li><li>compiler 需要得到最后一个 loader 产生的处理结果。这个处理结果应该是 String 或者 Buffer（被转换为一个 string）</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="12-loader-类型">1.2 loader 类型<a class="hash-link" href="#12-loader-类型" title="Direct link to heading">​</a></h3><ul><li><a href="https://github.com/webpack/webpack/blob/v4.39.3/lib/NormalModuleFactory.js#L159-L339" target="_blank" rel="noopener noreferrer">loader 的叠加顺序</a> = post(后置)+inline(内联)+normal(正常)+pre(前置)</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="13-特殊配置">1.3 特殊配置<a class="hash-link" href="#13-特殊配置" title="Direct link to heading">​</a></h3><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * Auto=Normal</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * !  noAuto 不要普通 loader</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * -! noPreAuto 不要前置和普通 loader</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * !! noPrePostAuto 不要前后置和普通 loader,只要内联 loader</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> */</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="14-pitch">1.4 pitch<a class="hash-link" href="#14-pitch" title="Direct link to heading">​</a></h3><ul><li>比如 <code>a!b!c!module</code>, 正常调用顺序应该是 c、b、a，但是真正调用顺序是 a(pitch)、b(pitch)、c(pitch)、c、b、a,如果其中任何一个 pitching loader 返回了值就相当于在它以及它右边的 loader 已经执行完毕</li><li>比如如果 b 返回了字符串&quot;result b&quot;, 接下来只有 a 会被系统执行，且 a 的 loader 收到的参数是 result b</li></ul><p><img loading="lazy" src="https://raw.githubusercontent.com/ghx9908/image-hosting/master/img/20230307173454.png" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="15-配置自定义-loader-有以下几种方式">1.5 配置自定义 loader 有以下几种方式<a class="hash-link" href="#15-配置自定义-loader-有以下几种方式" title="Direct link to heading">​</a></h3><ol><li><p>配置绝对路径</p></li><li><p>配置 resolveLoader 中的 alias</p></li><li><p>如果说 loader 很多，用 alias 一个一个配很麻烦，resolveLoader.modules 指定一个目录，找 loader 的时候会先去此目录下面找</p></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="plugin">Plugin<a class="hash-link" href="#plugin" title="Direct link to heading">​</a></h2><p><code>webpack</code>中的<code>plugin</code>也是如此，<code>plugin</code>赋予其各种灵活的功能，例如打包优化、资源管理、环境变量注入等，它们会运行在 <code>webpack</code> 的不同阶段（钩子 / 生命周期），贯穿了<code>webpack</code>整个编译周期</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="特性">特性<a class="hash-link" href="#特性" title="Direct link to heading">​</a></h3><p>其本质是一个具有<code>apply</code>方法<code>javascript</code>对象</p><p><code>apply</code> 方法会被 <code>webpack compiler </code>调用，并且在整个编译生命周期都可以访问 <code>compiler </code>对象</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> pluginName </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;ConsoleLogOnBuildWebpackPlugin&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">ConsoleLogOnBuildWebpackPlugin</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">apply</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">compiler</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    compiler</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">hooks</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">run</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">tap</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">pluginName</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">compilation</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;webpack 构建过程开始！&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">ConsoleLogOnBuildWebpackPlugin</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>compiler hook</code> 的 <code>tap </code>方法的第一个参数，应是驼峰式命名的插件名称</p><p>关于整个编译生命周期钩子，有如下：</p><ul><li>entry-option ：初始化 option</li><li>run</li><li>compile： 真正开始的编译，在创建 compilation 对象之前</li><li>compilation ：生成好了 compilation 对象</li><li>make 从 entry 开始递归分析依赖，准备对每个模块进行 build</li><li>after-compile： 编译 build 过程结束</li><li>emit ：在将内存中 assets 内容写到磁盘文件夹之前</li><li>after-emit ：在将内存中 assets 内容写到磁盘文件夹之后</li><li>done： 完成所有的编译过程</li><li>failed： 编译失败的时候</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="常见的plugin">常见的plugin<a class="hash-link" href="#常见的plugin" title="Direct link to heading">​</a></h3><p>HtmlWebpackPlugin----在打包结束后，⾃动生成⼀个 <code>html</code> ⽂文件</p><p>clean-webpack-plugin------删除（清理）构建目录</p><p>mini-css-extract-plugin----提取 <code>CSS</code> 到一个单独的文件中</p><p>代码丑化的</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="hmr">HMR<a class="hash-link" href="#hmr" title="Direct link to heading">​</a></h2><p>Webpack 实现热更新的原理是在开发环境中通过 Webpack Dev Server 创建一个 HTTP 服务器，将编译后的文件作为资源发布在服务器上，并且通过 Websocket 与客户端保持长连接，实时将编译后的文件推送给客户端，从而实现实时更新页面的效果。</p><hr><ul><li>通过<code>webpack-dev-server</code>创建两个服务器：提供静态资源的服务（express）和Socket服务</li><li>express server 负责直接提供静态资源的服务（打包后的资源直接被浏览器请求和解析）</li><li>socket server 是一个 websocket 的长连接，双方可以通信</li><li>当 socket server 监听到对应的模块发生变化时，会生成两个文件.json（manifest文件）和.js文件（update chunk）</li><li>通过长连接，socket server 可以直接将这两个文件主动发送给客户端（浏览器）</li><li>浏览器拿到两个新的文件后，通过HMR runtime机制，加载这两个文件，并且针对修改的模块进行更新</li></ul><hr><ol><li>第一步，在 webpack 的 watch 模式下，文件系统中某一个文件发生修改，webpack 监听到文件变化，根据配置文件对模块重新编译打包，并将打包后的代码通过简单的 JavaScript 对象保存在内存中。</li><li>第二步是 webpack-dev-server 和 webpack 之间的接口交互，而在这一步，主要是 dev-server 的中间件 webpack-dev-middleware 和 webpack 之间的交互，webpack-dev-middleware 调用 webpack 暴露的 API对代码变化进行监控，并且告诉 webpack，将代码打包到内存中。</li><li>第三步是 webpack-dev-server 对文件变化的一个监控，这一步不同于第一步，并不是监控代码变化重新打包。当我们在配置文件中配置了devServer.watchContentBase 为 true 的时候，Server 会监听这些配置文件夹中静态文件的变化，变化后会通知浏览器端对应用进行 live reload。注意，这儿是浏览器刷新，和 HMR 是两个概念。</li><li>第四步也是 webpack-dev-server 代码的工作，该步骤主要是通过 sockjs（webpack-dev-server 的依赖）在浏览器端和服务端之间建立一个 websocket 长连接，将 webpack 编译打包的各个阶段的状态信息告知浏览器端，同时也包括第三步中 Server 监听静态文件变化的信息。浏览器端根据这些 socket 消息进行不同的操作。当然服务端传递的最主要信息还是新模块的 hash 值，后面的步骤根据这一 hash 值来进行模块热替换。</li><li>webpack-dev-server/client 端并不能够请求更新的代码，也不会执行热更模块操作，而把这些工作又交回给了 webpack，webpack/hot/dev-server 的工作就是根据 webpack-dev-server/client 传给它的信息以及 dev-server 的配置决定是刷新浏览器呢还是进行模块热更新。当然如果仅仅是刷新浏览器，也就没有后面那些步骤了。</li><li>HotModuleReplacement.runtime 是客户端 HMR 的中枢，它接收到上一步传递给他的新模块的 hash 值，它通过 JsonpMainTemplate.runtime 向 server 端发送 Ajax 请求，服务端返回一个 json，该 json 包含了所有要更新的模块的 hash 值，获取到更新列表后，该模块再次通过 jsonp 请求，获取到最新的模块代码。这就是上图中 7、8、9 步骤。</li><li>而第 10 步是决定 HMR 成功与否的关键步骤，在该步骤中，HotModulePlugin 将会对新旧模块进行对比，决定是否更新模块，在决定更新模块后，检查模块之间的依赖关系，更新模块的同时更新模块间的依赖引用。</li><li>最后一步，当 HMR 失败后，回退到 live reload 操作，也就是进行浏览器刷新来获取最新打包代码</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="模块联邦">模块联邦<a class="hash-link" href="#模块联邦" title="Direct link to heading">​</a></h2><p>模块联邦是一个可以实现多个独立 Webpack 构建之间共享代码的技术，它的优点和缺点如下：</p><p>优点：</p><ul><li>可以让不同团队开发的独立应用之<strong>间共享代码，避免重复打包相同的模块，减少打包的体积，提高应用的性能。</strong></li><li>可以将应<strong>用拆分成更小的模块，</strong>提高应用的可维护性和可重用性，方便新增和修改功能。</li><li>可以在不同应用之间共享运行时状态，提高应用的运行效率和响应速度。</li></ul><p>缺点：</p><ul><li>需要对项目结构和打包方式进行重构，实现起来可能需要耗费一定的时间和精力。</li><li>多个应用之间共享代码的同时也带来了代码耦合度的增加，需要进行合理的管理和维护。</li><li>在调试和错误排查方面可能会增加一定的难度，需要对整个系统有较为深入的了解。</li></ul><p>总的来说，模块联邦在多个独立应用之间共享代码方面具有显著的优势，但是需要权衡其带来的开发成本和管理维护的复杂度。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tree-shaking">tree shaking<a class="hash-link" href="#tree-shaking" title="Direct link to heading">​</a></h2><ul><li><strong>ES6 Module引入进行静态分析，故而编译的时候正确判断到底加载了那些模块</strong></li><li>静态分析程序流，判断那些模块和变量未被使用或者引用，进而删除对应代码</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="splitclucks">splitClucks<a class="hash-link" href="#splitclucks" title="Direct link to heading">​</a></h2><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token maybe-class-name">HtmlWebpackPlugin</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;html-webpack-plugin&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token maybe-class-name">AssetPlugin</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;./asset-plugin&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">mode</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;development&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">devtool</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">entry</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">page1</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;./src/page1.js&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">page2</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;./src/page2.js&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">page3</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;./src/page3.js&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">optimization</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">splitChunks</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// 表示选择哪些 chunks 进行分割，可选值有：async，initial和all</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token literal-property property" style="color:#36acaa">chunks</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;all&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// 表示新分离出的chunk必须大于等于minSize，默认为30000，约30kb。</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token literal-property property" style="color:#36acaa">minSize</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token comment" style="color:#999988;font-style:italic">//默认值是20000,生成的代码块的最小尺寸</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// 表示一个模块至少应被minChunks个chunk所包含才能分割。默认为1。</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token literal-property property" style="color:#36acaa">minChunks</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// 表示按需加载文件时，并行请求的最大数目。默认为5。</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token literal-property property" style="color:#36acaa">maxAsyncRequests</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// 表示加载入口文件时，并行请求的最大数目。默认为3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token literal-property property" style="color:#36acaa">maxInitialRequests</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// 表示拆分出的chunk的名称连接符。默认为~。如chunk~vendors.js</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token literal-property property" style="color:#36acaa">automaticNameDelimiter</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;~&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token literal-property property" style="color:#36acaa">cacheGroups</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token literal-property property" style="color:#36acaa">defaultVendors</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token literal-property property" style="color:#36acaa">test</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token regex regex-delimiter" style="color:#36acaa">/</span><span class="token regex regex-source language-regex" style="color:#36acaa">[\\/]node_modules[\\/]</span><span class="token regex regex-delimiter" style="color:#36acaa">/</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//条件</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token literal-property property" style="color:#36acaa">priority</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">10</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">///优先级，一个chunk很可能满足多个缓存组，会被抽取到优先级高的缓存组中,为了能够让自定义缓存组有更高的优先级(默认0),默认缓存组的priority属性为负值.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword module" style="color:#00009f">default</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token literal-property property" style="color:#36acaa">minChunks</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token comment" style="color:#999988;font-style:italic">////被多少模块共享,在分割之前模块的被引用次数</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token literal-property property" style="color:#36acaa">priority</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">20</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">runtimeChunk</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">plugins</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token literal-property property" style="color:#36acaa">template</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;./src/index.html&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token literal-property property" style="color:#36acaa">chunks</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;page1&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token literal-property property" style="color:#36acaa">filename</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;page1.html&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token literal-property property" style="color:#36acaa">template</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;./src/index.html&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token literal-property property" style="color:#36acaa">chunks</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;page2&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token literal-property property" style="color:#36acaa">filename</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;page2.html&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token literal-property property" style="color:#36acaa">template</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;./src/index.html&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token literal-property property" style="color:#36acaa">chunks</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;page3&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token literal-property property" style="color:#36acaa">filename</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;page3.html&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">AssetPlugin</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="webpack-的优化">Webpack 的优化<a class="hash-link" href="#webpack-的优化" title="Direct link to heading">​</a></h2><ol><li>减小文件体积：可以通过使用 Tree shaking、代码分割和压缩等方式来减小文件体积。</li><li>加快构建速度：可以使用 Webpack 的缓存机制和多进程打包等方式来加快构建速度。</li><li>优化模块分离：可以使用动态导入和公共代码分离等方式来优化模块分离。</li><li>按需加载：可以使用按需加载来提高页面加载速度，减少不必要的请求和流量。</li><li>优化静态资源加载：可以使用 CDN 加速和本地缓存等方式来优化静态资源加载。</li><li>使用 Scope Hoisting：可以使用 Scope Hoisting 来减少模块数量，从而提高代码的运行效率。</li><li>优化打包输出：可以使用分离 CSS、合并 JavaScript、添加版本号等方式来优化打包输出 mini-css-extract-plugin</li><li>加快查找速度  alias  指定extension</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="webpack5">webpack5<a class="hash-link" href="#webpack5" title="Direct link to heading">​</a></h2><ul><li>持久化缓存</li><li>资源模块</li><li><code>moduleIds</code> &amp; <code>chunkIds</code>的优化</li><li>更智能的<code>tree shaking</code></li><li>nodeJs的<code>polyfill</code>脚本被移除</li><li>支持生成<code>e6/es2015</code>的代码</li><li><code>SplitChunk</code>和模块大小</li><li><code>Module Federation</code></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="commonjs-和-es6">common.js 和 es6<a class="hash-link" href="#commonjs-和-es6" title="Direct link to heading">​</a></h2><p>1、CommonJS 模块输出的是一个值的拷贝，ES6 模块输出的是值的引用。</p><p>2、CommonJS 模块是运行时加载，ES6 模块是编译时输出接口。</p><p>3、CommonJs 是单个值导出，ES6 Module可以导出多个</p><p>4、CommonJs 是动态语法可以写在判断里，ES6 Module 静态语法只能写在顶层</p><p>5、CommonJs 的 this 是当前模块，ES6 Module的 this 是 undefined</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="webpack-和-vite-区别">Webpack 和 Vite 区别<a class="hash-link" href="#webpack-和-vite-区别" title="Direct link to heading">​</a></h2><p>Webpack 是一个<strong>高度可配置的静态模块打包工具</strong>，它的主要思想是将所有的代<strong>码资源视为一个个模块</strong>，并通<strong>过各种 loader 和 plugin 的组合进行处理和打包</strong>。Webpack <strong>打包的过程较为复杂，需要花费一定的时间和资源</strong>，特别是在开发环境<strong>下需要实时编译和刷新页面时，</strong>Webpack 的<strong>效率会更</strong>低。但是<strong>，Webpack 能够满足复杂项目的需求，且社区支持广泛，功能强大。</strong></p><p>Vite 是一<strong>个基于浏览器原生 ES 模块导入的开发服务器。</strong>Vite 的主要思想是<strong>借助浏览器本身的原生模块支持</strong>，将代码分割成更小的块，<strong>在开发环境下不需要</strong>打包，而是以 ESM 模块的方式直接提供给浏览器使用。这使得<strong>开发环境下的启动和重新加载速度更快，尤其是对于大型项目</strong>。Vite 只在开发环境下使用，生产环境下仍然需要使用其他工具进行打包。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="umidva">umi+dva<a class="hash-link" href="#umidva" title="Direct link to heading">​</a></h2><p><strong>Umi 是一款可扩展的企业级前端应用框架，它提供了丰富的插件和配置项</strong>，能够快速地搭建起一个完整的前端工程。<strong>它还集成了 Dva 数据流方案，</strong>提供了一套完整的前端应用解决方案。因此，如果需要快速搭建一个企业级应用，<strong>并且需要处理复杂的数据</strong>流，那么使用 Umi 和 Dva 是一个不错的选择。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="vitemobx"><strong>vite+mobx</strong><a class="hash-link" href="#vitemobx" title="Direct link to heading">​</a></h2><p>Vite 是一款新兴的前端构建工具，它具有<strong>极快的启动和热重载速度，同时也支持按需加载，能够快速地提高前端</strong>开发效率。而 <strong>MobX 是一种简单而强大的状态管理库，它使用响应式编程的方式来处理应用状态</strong>，能够使状态管理更加简单和高效。因此，如果需要快速搭建一个现代化的前端应用，并且需要处理大量的状态，那么使用 Vite 和 MobX 是一个不错的选择。</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/website/interview/node"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">node面试题</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/website/interview/05vue"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">vue面试题</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#webpack-和-rollup-区别" class="table-of-contents__link toc-highlight">Webpack 和 rollup 区别</a></li><li><a href="#modulechunkbundle" class="table-of-contents__link toc-highlight">module，chunk，bundle</a></li><li><a href="#优缺点" class="table-of-contents__link toc-highlight">优缺点</a></li><li><a href="#工作流" class="table-of-contents__link toc-highlight">工作流</a></li><li><a href="#loader" class="table-of-contents__link toc-highlight">Loader</a><ul><li><a href="#11-概念" class="table-of-contents__link toc-highlight">1.1 概念</a></li><li><a href="#12-loader-类型" class="table-of-contents__link toc-highlight">1.2 loader 类型</a></li><li><a href="#13-特殊配置" class="table-of-contents__link toc-highlight">1.3 特殊配置</a></li><li><a href="#14-pitch" class="table-of-contents__link toc-highlight">1.4 pitch</a></li><li><a href="#15-配置自定义-loader-有以下几种方式" class="table-of-contents__link toc-highlight">1.5 配置自定义 loader 有以下几种方式</a></li></ul></li><li><a href="#plugin" class="table-of-contents__link toc-highlight">Plugin</a><ul><li><a href="#特性" class="table-of-contents__link toc-highlight">特性</a></li><li><a href="#常见的plugin" class="table-of-contents__link toc-highlight">常见的plugin</a></li></ul></li><li><a href="#hmr" class="table-of-contents__link toc-highlight">HMR</a></li><li><a href="#模块联邦" class="table-of-contents__link toc-highlight">模块联邦</a></li><li><a href="#tree-shaking" class="table-of-contents__link toc-highlight">tree shaking</a></li><li><a href="#splitclucks" class="table-of-contents__link toc-highlight">splitClucks</a></li><li><a href="#webpack-的优化" class="table-of-contents__link toc-highlight">Webpack 的优化</a></li><li><a href="#webpack5" class="table-of-contents__link toc-highlight">webpack5</a></li><li><a href="#commonjs-和-es6" class="table-of-contents__link toc-highlight">common.js 和 es6</a></li><li><a href="#webpack-和-vite-区别" class="table-of-contents__link toc-highlight">Webpack 和 Vite 区别</a></li><li><a href="#umidva" class="table-of-contents__link toc-highlight">umi+dva</a></li><li><a href="#vitemobx" class="table-of-contents__link toc-highlight"><strong>vite+mobx</strong></a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 My Project, Gao hongxiang.</div></div></div></footer></div>
<script src="/website/assets/js/runtime~main.4c7aaea7.js"></script>
<script src="/website/assets/js/main.a68dfd6a.js"></script>
</body>
</html>