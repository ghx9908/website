---
title: è±†ç¥é›†å›¢å‰ç«¯
sidebar_position: 2
last_update:
  date: 01/03/2022
  author: é«˜çº¢ç¿”
---

## å‰ç«¯åŸºç¡€

### å­—ç¬¦ä¸²åè½¬

```js
//æ–¹æ³•ä¸€ï¼šä½¿ç”¨å†…ç½®å‡½æ•°ï¼ˆæœ€ç®€å•ï¼‰
function reverseString(str) {
  return str.split("").reverse().join("")
}
//æ–¹æ³•äºŒï¼šä½¿ç”¨å¾ªç¯æ‰‹åŠ¨æ‹¼æ¥

function reverseString(str) {
  let result = ""
  for (let i = str.length - 1; i >= 0; i--) {
    result += str[i]
  }
  return result
}

//æ–¹æ³•ä¸‰ï¼šä½¿ç”¨ ES6 è§£æ„ + reduce
function reverseString(str) {
  return [...str].reduce((acc, char) => char + acc, "")
}
```

### æ•°ç»„å»é‡

```js
// ä½¿ç”¨ Setï¼ˆæœ€æ¨èï¼‰
function uniqueArray(arr) {
  return [...new Set(arr)]
}
//ä½¿ç”¨ filter + indexOf
function uniqueArray(arr) {
  return arr.filter((item, index) => arr.indexOf(item) === index)
}

// æ‰‹åŠ¨ç”¨ Map æˆ– Object å»é‡
function uniqueArray(arr) {
  const seen = {}
  const result = []
  for (let item of arr) {
    if (!seen[item]) {
      seen[item] = true
      result.push(item)
    }
  }
  return result
}
```

### æ•°ç»„æ’åº

1. å†’æ³¡æ’åº

   > å†’æ³¡æ’åºçš„è¿‡ç¨‹ï¼Œå°±æ˜¯ä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œé‡å¤æ¯”è¾ƒç›¸é‚»çš„ä¸¤ä¸ªé¡¹ï¼Œè‹¥ç¬¬ä¸€é¡¹æ¯”ç¬¬äºŒé¡¹æ›´å¤§ï¼Œåˆ™äº¤æ¢ä¸¤è€…çš„ä½ç½®ï¼›åä¹‹ä¸åŠ¨ã€‚

```js
function betterBubbleSort(arr) {
  const len = arr.length
  for (let i = 0; i < len; i++) {
    // æ³¨æ„å·®åˆ«åœ¨è¿™è¡Œï¼Œæˆ‘ä»¬å¯¹å†…å±‚å¾ªç¯çš„èŒƒå›´ä½œäº†é™åˆ¶
    for (let j = 0; j < len - 1 - i; j++) {
      if (arr[j] > arr[j + 1]) {
        ;[arr[j], arr[j + 1]] = [arr[j + 1], arr[j]]
      }
    }
  }
  return arr
}
```

2. é€‰æ‹©æ’åº

   > é€‰æ‹©æ’åºçš„å…³é”®å­—æ˜¯â€œæœ€å°å€¼â€ï¼šå¾ªç¯éå†æ•°ç»„ï¼Œæ¯æ¬¡éƒ½æ‰¾å‡ºå½“å‰èŒƒå›´å†…çš„æœ€å°å€¼ï¼ŒæŠŠå®ƒæ”¾åœ¨å½“å‰èŒƒå›´çš„å¤´éƒ¨ï¼›ç„¶åç¼©å°æ’åºèŒƒå›´ï¼Œç»§ç»­é‡å¤ä»¥ä¸Šæ“ä½œï¼Œç›´è‡³æ•°ç»„å®Œå…¨æœ‰åºä¸ºæ­¢ã€‚

```JS
function selectSort(arr)  {
  // ç¼“å­˜æ•°ç»„é•¿åº¦
  const len = arr.length
  // å®šä¹‰ minIndexï¼Œç¼“å­˜å½“å‰åŒºé—´æœ€å°å€¼çš„ç´¢å¼•ï¼Œæ³¨æ„æ˜¯ç´¢å¼•
  let minIndex
  // i æ˜¯å½“å‰æ’åºåŒºé—´çš„èµ·ç‚¹
  for(let i = 0; i < len - 1; i++) {
    // åˆå§‹åŒ– minIndex ä¸ºå½“å‰åŒºé—´ç¬¬ä¸€ä¸ªå…ƒç´ 
    minIndex = i
    // iã€jåˆ†åˆ«å®šä¹‰å½“å‰åŒºé—´çš„ä¸Šä¸‹ç•Œï¼Œiæ˜¯å·¦è¾¹ç•Œï¼Œjæ˜¯å³è¾¹ç•Œ
    for(let j = i; j < len; j++) {
      // è‹¥ j å¤„çš„æ•°æ®é¡¹æ¯”å½“å‰æœ€å°å€¼è¿˜è¦å°ï¼Œåˆ™æ›´æ–°æœ€å°å€¼ç´¢å¼•ä¸º j
      if(arr[j] < arr[minIndex]) {
        minIndex = j
      }
    }
    // å¦‚æœ minIndex å¯¹åº”å…ƒç´ ä¸æ˜¯ç›®å‰çš„å¤´éƒ¨å…ƒç´ ï¼Œåˆ™äº¤æ¢ä¸¤è€…
    if(minIndex !== i) {
      [arr[i], arr[minIndex]] = [arr[minIndex], arr[i]]
    }
  }
  return arr
}


```

3. æ’å…¥æ’åº

> - æ’å…¥æ’åºçš„æ ¸å¿ƒæ€æƒ³æ˜¯â€œæ‰¾åˆ°å…ƒç´ åœ¨å®ƒå‰é¢é‚£ä¸ªåºåˆ—ä¸­çš„æ­£ç¡®ä½ç½®â€ã€‚
> - å…·ä½“æ¥è¯´ï¼Œæ’å…¥æ’åºæ‰€æœ‰çš„æ“ä½œéƒ½åŸºäºä¸€ä¸ªè¿™æ ·çš„å‰æï¼šå½“å‰å…ƒç´ å‰é¢çš„åºåˆ—æ˜¯æœ‰åºçš„ã€‚åŸºäºè¿™ä¸ªå‰æï¼Œä»åå¾€å‰å»å¯»æ‰¾å½“å‰å…ƒç´ åœ¨å‰é¢é‚£ä¸ªåºåˆ—é‡Œçš„æ­£ç¡®ä½ç½®ã€‚

```JS
function insertSort(arr) {
  // ç¼“å­˜æ•°ç»„é•¿åº¦
  const len = arr.length
  // temp ç”¨æ¥ä¿å­˜å½“å‰éœ€è¦æ’å…¥çš„å…ƒç´ 
  let temp
  // iç”¨äºæ ‡è¯†æ¯æ¬¡è¢«æ’å…¥çš„å…ƒç´ çš„ç´¢å¼•
  for(let i = 1;i < len; i++) {
    // jç”¨äºå¸®åŠ© temp å¯»æ‰¾è‡ªå·±åº”è¯¥æœ‰çš„å®šä½
    let j = i
    temp = arr[i]
    // åˆ¤æ–­ j å‰é¢ä¸€ä¸ªå…ƒç´ æ˜¯å¦æ¯” temp å¤§
    while(j > 0 && arr[j-1] > temp) {
      // å¦‚æœæ˜¯ï¼Œåˆ™å°† j å‰é¢çš„ä¸€ä¸ªå…ƒç´ åç§»ä¸€ä½ï¼Œä¸º temp è®©å‡ºä½ç½®
      arr[j] = arr[j-1]
      j--
    }
    // å¾ªç¯è®©ä½ï¼Œæœ€åå¾—åˆ°çš„ j å°±æ˜¯ temp çš„æ­£ç¡®ç´¢å¼•
    arr[j] = temp
  }
  return arr
}
```

4. å½’å¹¶æ’åº

> - åˆ†è§£å­é—®é¢˜ï¼šå°†éœ€è¦è¢«æ’åºçš„æ•°ç»„ä»ä¸­é—´åˆ†å‰²ä¸ºä¸¤åŠï¼Œç„¶åå†å°†åˆ†å‰²å‡ºæ¥çš„æ¯ä¸ªå­æ•°ç»„å„åˆ†å‰²ä¸ºä¸¤åŠï¼Œé‡å¤ä»¥ä¸Šæ“ä½œï¼Œç›´åˆ°å•ä¸ªå­æ•°ç»„åªæœ‰ä¸€ä¸ªå…ƒç´ ä¸ºæ­¢ã€‚
> - æ±‚è§£æ¯ä¸ªå­é—®é¢˜ï¼šä»ç²’åº¦æœ€å°çš„å­æ•°ç»„å¼€å§‹ï¼Œä¸¤ä¸¤åˆå¹¶ã€ç¡®ä¿æ¯æ¬¡åˆå¹¶å‡ºæ¥çš„æ•°ç»„éƒ½æ˜¯æœ‰åºçš„ã€‚ï¼ˆè¿™é‡Œçš„â€œå­é—®é¢˜â€æŒ‡çš„å°±æ˜¯å¯¹æ¯ä¸ªå­æ•°ç»„è¿›è¡Œæ’åºï¼‰ã€‚ åˆå¹¶å­é—®é¢˜çš„è§£ï¼Œå¾—å‡ºå¤§é—®é¢˜çš„è§£ï¼šå½“æ•°ç»„è¢«åˆå¹¶è‡³åŸæœ‰çš„è§„æ¨¡æ—¶ï¼Œå°±å¾—åˆ°äº†ä¸€ä¸ªå®Œå…¨æ’åºçš„æ•°ç»„

```JS
function mergeSort(arr) {
    const len = arr.length
    // å¤„ç†è¾¹ç•Œæƒ…å†µ
    if(len <= 1) {
        return arr
    }
    // è®¡ç®—åˆ†å‰²ç‚¹
    const mid = Math.floor(len / 2)
    // é€’å½’åˆ†å‰²å·¦å­æ•°ç»„ï¼Œç„¶ååˆå¹¶ä¸ºæœ‰åºæ•°ç»„
    const leftArr = mergeSort(arr.slice(0, mid))
    // é€’å½’åˆ†å‰²å³å­æ•°ç»„ï¼Œç„¶ååˆå¹¶ä¸ºæœ‰åºæ•°ç»„
    const rightArr = mergeSort(arr.slice(mid,len))
    // åˆå¹¶å·¦å³ä¸¤ä¸ªæœ‰åºæ•°ç»„
    arr = mergeArr(leftArr, rightArr)
    // è¿”å›åˆå¹¶åçš„ç»“æœ
    return arr
}

function mergeArr(arr1, arr2) {
    // åˆå§‹åŒ–ä¸¤ä¸ªæŒ‡é’ˆï¼Œåˆ†åˆ«æŒ‡å‘ arr1 å’Œ arr2
    let i = 0, j = 0
    // åˆå§‹åŒ–ç»“æœæ•°ç»„
    const res = []
    // ç¼“å­˜arr1çš„é•¿åº¦
    const len1 = arr1.length
    // ç¼“å­˜arr2çš„é•¿åº¦
    const len2 = arr2.length
    // åˆå¹¶ä¸¤ä¸ªå­æ•°ç»„
    while(i < len1 && j < len2) {
        if(arr1[i] < arr2[j]) {
            res.push(arr1[i])
            i++
        } else {
            res.push(arr2[j])
            j++
        }
    }
    // è‹¥å…¶ä¸­ä¸€ä¸ªå­æ•°ç»„é¦–å…ˆè¢«åˆå¹¶å®Œå…¨ï¼Œåˆ™ç›´æ¥æ‹¼æ¥å¦ä¸€ä¸ªå­æ•°ç»„çš„å‰©ä½™éƒ¨åˆ†
    if(i<len1) {
        return res.concat(arr1.slice(i))
    } else {
        return res.concat(arr2.slice(j))
    }
}

```

5 å¿«æ’

- å¿«é€Ÿæ’åºä¼šå°†åŸå§‹çš„æ•°ç»„ç­›é€‰æˆè¾ƒå°å’Œè¾ƒå¤§çš„ä¸¤ä¸ªå­æ•°ç»„ï¼Œç„¶åé€’å½’åœ°æ’åºä¸¤ä¸ªå­æ•°ç»„ã€‚

### äºŒåˆ†æœç´¢

> äºŒåˆ†æœç´¢æ˜¯ä¸€ç§**åœ¨æœ‰åºæ•°ç»„ä¸­æŸ¥æ‰¾ç›®æ ‡å€¼**çš„é«˜æ•ˆç®—æ³•ï¼Œå®ƒæ¯æ¬¡éƒ½æŠŠæŸ¥æ‰¾èŒƒå›´**æŠ˜åŠ**ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ **O(log n)**ã€‚

æ•°ç»„ **å¿…é¡»æ˜¯æœ‰åºçš„**

ç›®æ ‡æ˜¯æŸ¥æ‰¾æŸä¸ªå…ƒç´ çš„ä½ç½®ï¼Œæˆ–è€…åˆ¤æ–­å®ƒæ˜¯å¦å­˜åœ¨

### http çŠ¶æ€å—

1xxï¼ˆä¿¡æ¯æ€§çŠ¶æ€ç ï¼‰ï¼šè¡¨ç¤ºæœåŠ¡å™¨å·²æ¥æ”¶åˆ°å®¢æˆ·ç«¯è¯·æ±‚ï¼Œæ­£åœ¨è¿›ä¸€æ­¥å¤„ç†ä¸­ã€‚

- 100 Continueï¼šè¡¨ç¤ºæœåŠ¡å™¨å·²ç»æ¥æ”¶åˆ°è¯·æ±‚å¤´ï¼Œå¹¶ä¸”å®¢æˆ·ç«¯åº”è¯¥ç»§ç»­å‘é€è¯·æ±‚ä½“ã€‚
- 101 Switching Protocolsï¼š å‡çº§åè®® websocker
- 102 Processing: è¿™ä¸ªçŠ¶æ€ç è¡¨ç¤ºæœåŠ¡å™¨å·²ç»æ”¶åˆ°è¯·æ±‚å¹¶**ä¸”æ­£åœ¨å¤„ç†ï¼Œä½†æ˜¯å“åº”è¿˜æ²¡æœ‰å‡†å¤‡å¥½å‘é€ã€‚**

2xxï¼ˆæˆåŠŸçŠ¶æ€ç ï¼‰ï¼šè¡¨ç¤ºè¯·æ±‚å·²ç»è¢«æœåŠ¡å™¨æ¥æ”¶ã€ç†è§£ã€å¹¶æˆåŠŸå¤„ç†äº†ã€‚

- 200 OK**ï¼šè¡¨ç¤ºè¯·æ±‚å·²æˆåŠŸ**ï¼Œè¯·æ±‚æ‰€å¸Œæœ›çš„å“åº”å¤´æˆ–æ•°æ®ä½“å°†éšæ­¤å“åº”è¿”å›ã€‚
- 201 Createdï¼šè¡¨ç¤ºè¯·æ±‚å·²**ç»è¢«æˆåŠŸå¤„ç†ï¼Œå¹¶åˆ›å»ºäº†æ–°çš„èµ„æºã€‚**
- 204 No Contentï¼šè¡¨ç¤ºè¯·æ±‚å·²ç»æˆåŠŸå¤„ç†ï¼Œ**ä½†å“åº”æŠ¥æ–‡ä¸­ä¸åŒ…å«å®ä½“çš„ä¸»ä½“éƒ¨åˆ†**ã€‚
- 206 èŒƒå›´è¯·æ±‚

3xxï¼ˆé‡å®šå‘çŠ¶æ€ç ï¼‰ï¼šè¡¨ç¤ºéœ€è¦å®¢æˆ·ç«¯è¿›ä¸€æ­¥æ“ä½œæ‰èƒ½å®Œæˆè¯·æ±‚ã€‚

- 301 Moved Permanentlyï¼šæ°¸ä¹…é‡å®šå‘
- 302 Foundï¼šä¸´æ—¶é‡å®šå‘ 302 çŠ¶æ€ç åˆ™æ˜ç¡®è¡¨ç¤ºå®¢æˆ·ç«¯åº”è¯¥ä½¿ç”¨æ–°çš„ URL å‘é€ä¸€ä¸ª GET è¯·æ±‚ã€‚
- 304 Not Modifiedï¼šåå•†ç¼“å­˜
- 307 ä¸´æ—¶ post

4xxï¼ˆå®¢æˆ·ç«¯é”™è¯¯çŠ¶æ€ç ï¼‰ï¼šè¡¨ç¤ºå®¢æˆ·ç«¯å‘é€çš„è¯·æ±‚æœ‰é”™è¯¯ã€‚

- 400 Bad Requestï¼š**è¡¨ç¤ºå®¢æˆ·ç«¯å‘é€çš„è¯·æ±‚æœ‰è¯­æ³•é”™è¯¯**ï¼ŒæœåŠ¡å™¨æ— æ³•è¯†åˆ«ã€‚

- 401 Unauthorizedï¼šè¡¨ç¤º**å®¢æˆ·ç«¯è¯·æ±‚æœªç»æˆæƒï¼Œéœ€è¦é€šè¿‡ç™»å½•ç­‰æ–¹å¼è¿›è¡Œèº«ä»½éªŒè¯**ã€‚

- 403 Forbiddenï¼š**è¡¨ç¤ºå®¢æˆ·ç«¯è¯·æ±‚è¢«æ‹’ç»**ï¼ŒæœåŠ¡å™¨ç†è§£è¯·æ±‚ä½†æ‹’ç»æ‰§è¡Œè¯¥è¯·æ±‚ã€‚

- 404 Not Foundï¼šè¡¨ç¤º**æœåŠ¡å™¨æ— æ³•æ ¹æ®å®¢æˆ·ç«¯çš„è¯·æ±‚æ‰¾åˆ°èµ„æº**ã€‚

- 405 è¯·æ±‚æ–¹æ³•ä¸å…è®¸

- 413 Payload Too Large

  - ä¸Šä¼ çš„æ–‡ä»¶/è¯·æ±‚ä½“å¤ªå¤§ã€‚
  - é€‚ç”¨äºä¸Šä¼ åœºæ™¯ï¼ŒæœåŠ¡å™¨é™åˆ¶äº†è¯·æ±‚ä½“å¤§å°ã€‚
  - 429 Too Many Requests

  - è¯·æ±‚å¤ªé¢‘ç¹ï¼Œè§¦å‘é™æµï¼ˆrate limitï¼‰ã€‚

- å¸¸ç”¨äºæ¥å£é˜²åˆ·è®¾è®¡ï¼Œæ¯”å¦‚éªŒè¯ç ã€ç™»å½•ã€‚

5xxï¼ˆæœåŠ¡å™¨é”™è¯¯çŠ¶æ€ç ï¼‰ï¼šè¡¨ç¤ºæœåŠ¡å™¨å¤„ç†è¯·æ±‚å‡ºé”™ã€‚

- 500 Internal Server Errorï¼šè¡¨ç¤º**æœåŠ¡å™¨å†…éƒ¨é”™è¯¯**ï¼Œæ— æ³•å®Œæˆè¯·æ±‚ã€‚
- 502 Bad Gatewayï¼šè¡¨ç¤ºæœåŠ¡å™¨ä½œä¸ºç½‘å…³æˆ–ä»£ç†è§’è‰²æ—¶ï¼Œä»ä¸Š**æ¸¸æœåŠ¡å™¨æ¥æ”¶åˆ°æ— æ•ˆçš„å“åº”ã€‚**ç½‘å…³é”™è¯¯ï¼Œå¯èƒ½æ˜¯ nginx ä»£ç†çš„æœåŠ¡æŒ‚äº†
- 503 Service Unavailableï¼šè¡¨ç¤ºæœåŠ¡å™¨æš‚æ—¶æ— æ³•æä¾›æœåŠ¡ï¼Œå¯èƒ½æ˜¯ç”±**äºè¿‡è½½æˆ–è€…ç»´æŠ¤ã€‚**
- 504 ç½‘å…³è¶…æ—¶ï¼Œåç«¯æ¥å£æœªåŠæ—¶å“åº”

### requestAnimationFrame

`requestAnimationFrame` æ˜¯æµè§ˆå™¨æä¾›çš„**ä¸“é—¨ç”¨äºåŠ¨ç”»å¸§æ›´æ–°çš„ API**ï¼Œå®ƒä¼šåœ¨ä¸‹ä¸€æ¬¡æµè§ˆå™¨**é‡ç»˜å‰**æ‰§è¡Œå›è°ƒï¼Œé€šå¸¸æ¯ç§’çº¦ 60 æ¬¡ï¼ˆ60fpsï¼‰ã€‚

ç”¨äº**æ¯ä¸€å¸§å‰æ¸²æŸ“å‰æ‰§è¡Œ**ï¼ŒèŠ‚èƒ½ + æµç•…åŠ¨ç”»

å¸§ç‡ = å±å¹•åˆ·æ–°ç‡ï¼ˆ60FPS â†’ æ¯ 16.67msï¼‰

æµè§ˆå™¨ä¼˜åŒ–è°ƒåº¦ï¼ˆå¦‚åˆå¹¶å¸§ã€è·³å¸§ï¼‰

```js
function render() {
  // æ‰§è¡ŒåŠ¨ç”»é€»è¾‘ï¼Œæ¯”å¦‚æ›´æ–° DOMã€canvas ç»˜å›¾
  requestAnimationFrame(render)
}
requestAnimationFrame(render)
```

`requestIdleCallback(callback)` æ˜¯æµè§ˆå™¨æä¾›çš„ä¸€ä¸ª **åœ¨ç©ºé—²æ—¶é—´æ‰§è¡Œå›è°ƒå‡½æ•°çš„ API**ï¼Œé€‚åˆæ‰§è¡Œä¸ç´§æ€¥ã€åå°ç±»çš„ä»»åŠ¡ï¼Œæ¯”å¦‚é¢„åŠ è½½ã€æ—¥å¿—ä¸ŠæŠ¥ã€ç¼“å­˜æ¸…ç†ç­‰ã€‚

```js
requestIdleCallback((deadline) => {
  while (deadline.timeRemaining() > 0 && tasks.length > 0) {
    doSomeTask(tasks.shift())
  }
})
```

| å¯¹æ¯”é¡¹       | `requestAnimationFrame` | `requestIdleCallback`              |
| ------------ | ----------------------- | ---------------------------------- |
| è§¦å‘æ—¶æœº     | ä¸‹ä¸€å¸§ç»˜åˆ¶å‰            | æµè§ˆå™¨ç©ºé—²æ—¶ï¼ˆéå…³é”®ä»»åŠ¡æœŸé—´ï¼‰     |
| ä½¿ç”¨åœºæ™¯     | åŠ¨ç”»æ›´æ–°ã€è§†è§‰æ¸²æŸ“      | éå…³é”®ä»»åŠ¡ã€åå°è®¡ç®—ã€é¢„åŠ è½½       |
| æ˜¯å¦æ¯å¸§è§¦å‘ | æ˜¯                      | ä¸ä¸€å®šï¼ˆå–å†³äºä¸»çº¿ç¨‹ç©ºé—²æƒ…å†µï¼‰     |
| æµè§ˆå™¨æ”¯æŒ   | âœ… æ‰€æœ‰æµè§ˆå™¨           | âš ï¸ Chrome/Edge æ”¯æŒï¼ŒSafari ä¸æ”¯æŒ |

âœ… æ‰€ä»¥ï¼š**åŠ¨ç”»æ¨èç”¨ requestAnimationFrameï¼Œè€Œä¸æ˜¯ setTimeout/Intervalã€‚**

æ‰§è¡Œ

```text
â†’ JS æ‰§è¡Œ
â†’ requestAnimationFrame å›è°ƒ
â†’ æ ·å¼è®¡ç®—
â†’ å¸ƒå±€ï¼ˆLayoutï¼‰
â†’ ç»˜åˆ¶ï¼ˆPaintï¼‰
â†’ åˆæˆï¼ˆCompositeï¼‰
â†’ å±å¹•åˆ·æ–°
```

**å¯¹æ¯”**

`requestAnimationFrame` ç”¨äº**ç»˜åˆ¶å‰çš„é«˜é¢‘åŠ¨ç”»**ï¼Œ
`setTimeout(fn, 16)` ç”¨äº**è¿‘ä¼¼æ¨¡æ‹Ÿå¸§é—´è°ƒç”¨**ï¼Œä½†ç²¾åº¦å’Œè°ƒåº¦å·®ï¼›
`requestIdleCallback` æ˜¯åœ¨**æµè§ˆå™¨ç©ºé—²æ—¶ä½ä¼˜å…ˆçº§æ‰§è¡Œä»»åŠ¡**ã€‚

| ç‰¹æ€§/å‡½æ•°             | `requestAnimationFrame`           | `setTimeout(fn, 16)`         | `requestIdleCallback`              |
| --------------------- | --------------------------------- | ---------------------------- | ---------------------------------- |
| è§¦å‘æ—¶æœº              | æµè§ˆå™¨ä¸‹ä¸€å¸§é‡ç»˜å‰ï¼ˆé€šå¸¸ 16.6msï¼‰ | å›ºå®šæ—¶é—´åè§¦å‘ï¼ˆä¸ä¸€å®šå‡†æ—¶ï¼‰ | æµè§ˆå™¨ç©ºé—²æ—¶                       |
| ç²¾åº¦                  | é«˜ï¼Œå¯¹é½å±å¹•åˆ·æ–°                  | ä¸ç¨³å®šï¼Œå—é™äºçº¿ç¨‹å’Œæœ€å°å»¶è¿Ÿ | ä¸ä¿è¯æ‰§è¡Œï¼Œæœ‰ deadline æ§åˆ¶       |
| é€‚åˆåœºæ™¯              | åŠ¨ç”»ã€è§†è§‰æ›´æ–°ã€è¿‡æ¸¡æ•ˆæœ          | ç®€å•å»¶è¿Ÿã€èŠ‚æµã€debounce ç­‰  | éå…³é”®ä»»åŠ¡ã€æ—¥å¿—ã€é¢„åŠ è½½ã€ç¼“å­˜æ¸…ç† |
| æ˜¯å¦æš‚åœï¼ˆå¤±ç„¦/åå°ï¼‰ | âœ… è‡ªåŠ¨æš‚åœï¼ˆçœèµ„æºï¼‰             | âŒ ç»§ç»­è¿è¡Œ                  | âœ… ç©ºé—²æ—¶æ‰è°ƒåº¦                    |
| å‚æ•°                  | å›è°ƒ(timestamp)                   | å›è°ƒ                         | å›è°ƒ(deadline) åŒ…å«å‰©ä½™æ—¶é—´ç­‰ä¿¡æ¯  |
| æµè§ˆå™¨å…¼å®¹æ€§          | å…¨å…¼å®¹                            | å…¨å…¼å®¹                       | âŒ Safari ä¸æ”¯æŒï¼ˆå¯é™çº§å¤„ç†ï¼‰     |

| é¡¹ç›®     | `requestAnimationFrame` | `setTimeout(fn, 16)` | `requestIdleCallback`  |
| -------- | ----------------------- | -------------------- | ---------------------- |
| æµç•…æ€§   | âœ… ä¼˜                   | âŒ å¯èƒ½ä¸¢å¸§          | âŒ éè§†è§‰ç±»ä»»åŠ¡        |
| ç¨³å®šæ€§   | âœ… é«˜                   | âŒ è°ƒåº¦ä¸ç¨³å®š        | âš ï¸ ä¸ç¡®å®šæ˜¯å¦æ‰§è¡Œ      |
| èµ„æºæ¶ˆè€— | ä½ï¼ˆå‰åå°è‡ªè°ƒåº¦ï¼‰      | ä¸­ï¼ˆæŒç»­è§¦å‘ï¼‰       | æœ€ä½                   |
| æ¨èç”¨é€” | åŠ¨ç”»ã€æ»šåŠ¨ã€è¿›åº¦æ¡ç­‰    | fallbackã€å»¶æ—¶       | æ—¥å¿—ã€é¢„åŠ è½½ã€ç¼“å­˜ä»»åŠ¡ |

**èƒ½ä¿è¯ 60fps å—**

`requestAnimationFrame` ç†è®ºä¸Šæ˜¯åŸºäºæµè§ˆå™¨å±å¹•åˆ·æ–°ç‡æ‰§è¡Œçš„ï¼Œé€šå¸¸æ˜¯ 60fpsï¼Œå³æ¯ 16.67ms è°ƒç”¨ä¸€æ¬¡å›è°ƒå‡½æ•°ã€‚ä½†å®ƒä¸èƒ½ä¿è¯å›ºå®šå¸§ç‡ï¼Œä¼šå—åˆ°ä¸»çº¿ç¨‹å‹åŠ›ã€åå°æ ‡ç­¾é¡µã€ç¡¬ä»¶æ€§èƒ½ç­‰å¤šå› ç´ å½±å“ã€‚å¦‚æœä¸€å¸§è®¡ç®—æˆ–ç»˜åˆ¶è¶…è¿‡ 16msï¼Œå°±å¯èƒ½æ‰å¸§ï¼Œå¯¼è‡´åŠ¨ç”»å¡é¡¿ã€‚ä¸ºäº†æ€§èƒ½ä¼˜åŒ–ï¼Œæˆ‘ä»¬é€šå¸¸ç»“åˆèŠ‚æµã€åˆ†å¸§ç­‰æŠ€æœ¯æé«˜æµç•…åº¦

### Babel çš„ä½œç”¨

- Babel èƒ½å¤Ÿè½¬è¯‘ `ECMAScript 2015+` çš„ä»£ç ï¼Œä½¿å®ƒåœ¨æ—§çš„æµè§ˆå™¨æˆ–è€…ç¯å¢ƒä¸­ä¹Ÿèƒ½å¤Ÿè¿è¡Œ
- å·¥ä½œè¿‡ç¨‹åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†

  - Parse(è§£æ) å°†æºä»£ç è½¬æ¢æˆæŠ½è±¡è¯­æ³•æ ‘ï¼Œæ ‘ä¸Šæœ‰å¾ˆå¤šçš„[estree èŠ‚ç‚¹](https://github.com/estree/estree)
  - Transform(è½¬æ¢) å¯¹æŠ½è±¡è¯­æ³•æ ‘è¿›è¡Œè½¬æ¢
  - Generate(ä»£ç ç”Ÿæˆ) å°†ä¸Šä¸€æ­¥ç»è¿‡è½¬æ¢è¿‡çš„æŠ½è±¡è¯­æ³•æ ‘ç”Ÿæˆæ–°çš„ä»£ç 

- [@babel/parser](https://github.com/babel/babel/tree/master/packages/@babel/parser) å¯ä»¥æŠŠæºç è½¬æ¢æˆ AST
- [@babel/traverse](https://www.npmjs.com/package/babel-traverse)ç”¨äºå¯¹ AST çš„éå†ï¼Œç»´æŠ¤äº†æ•´æ£µæ ‘çš„çŠ¶æ€ï¼Œå¹¶ä¸”è´Ÿè´£æ›¿æ¢ã€ç§»é™¤å’Œæ·»åŠ èŠ‚ç‚¹
- [@babel/generate](https://github.com/babel/babel/tree/master/packages/@babel/generate) å¯ä»¥æŠŠ AST ç”Ÿæˆæºç ï¼ŒåŒæ—¶ç”Ÿæˆ sourcemap

Babel æ˜¯å‰ç«¯å·¥ç¨‹ä¸­æœ€æ ¸å¿ƒçš„è½¬è¯‘å·¥å…·ä¹‹ä¸€ï¼Œå®ƒè´Ÿè´£å°†æˆ‘ä»¬ç¼–å†™çš„**é«˜é˜¶ JSï¼ˆæ¯”å¦‚ ES6ã€TSã€JSXï¼‰è½¬ä¸ºæµè§ˆå™¨å…¼å®¹çš„ ES5 ä»£ç **ã€‚é¡¹ç›®ä¸­æˆ‘é€šå¸¸ç»“åˆ Webpack é…ç½® babel-loader å’Œ preset-envï¼Œç¡®ä¿ä»£ç åœ¨ä¸»æµæµè§ˆå™¨ä¸­éƒ½èƒ½è¿è¡Œã€‚æ­¤å¤– Babel è¿˜æ”¯æŒæ’ä»¶æœºåˆ¶ï¼Œæˆ‘åœ¨ React é¡¹ç›®ä¸­ç”¨è¿‡åƒ `transform-runtime` æ¥ä¼˜åŒ– helper å¤ç”¨ï¼Œä¹Ÿé…ç½®è¿‡è£…é¥°å™¨æ’ä»¶æ”¯æŒ MobX çš„è¯­æ³•ç³–ã€‚

### ç»§æ‰¿

**ä¸€ã€åŸå‹é“¾ç»§æ‰¿**

Â·

**é‡ç‚¹ï¼š** è®©æ–°å®ä¾‹çš„åŸå‹ç­‰äºçˆ¶ç±»çš„å®ä¾‹ã€‚

**ä¼˜ç‚¹ï¼š**

1. å®ä¾‹å¯ç»§æ‰¿çš„å±æ€§æœ‰ï¼šå®ä¾‹çš„æ„é€ å‡½æ•°çš„å±æ€§ï¼Œçˆ¶ç±»æ„é€ å‡½æ•°å±æ€§ï¼Œçˆ¶ç±»åŸå‹çš„å±æ€§ã€‚

**ç¼ºç‚¹ï¼š**

1. æ–°å®ä¾‹æ— æ³•å‘çˆ¶ç±»æ„é€ å‡½æ•°ä¼ å‚ã€‚

2. ç»§æ‰¿å•ä¸€ã€‚(åªèƒ½ç»§æ‰¿ä¸€ä¸ªçˆ¶ç±»æ„é€ å‡½æ•°)

3. æ‰€æœ‰æ–°å®ä¾‹éƒ½ä¼šå…±äº«çˆ¶ç±»å®ä¾‹çš„å±æ€§ã€‚ï¼ˆåŸå‹ä¸Šçš„å±æ€§æ˜¯å…±äº«çš„ï¼Œä¸€ä¸ªå®ä¾‹ä¿®æ”¹äº†åŸå‹å±æ€§ï¼Œå¦ä¸€ä¸ªå®ä¾‹çš„åŸæ€§ä¹Ÿä¼šè¢«ä¿®æ”¹ï¼ï¼‰

4. è¦æƒ³ä¸ºå­ç±»åŸå‹æ–°å¢å±æ€§å’Œæ–¹æ³•ï¼Œå¿…é¡»è¦åœ¨`new SuperType()`è¿™æ ·çš„è¯­å¥ä¹‹åæ‰§è¡Œ

   ```js
   function SuperType(name) {
     this.name = name
   }
   function SubType() {
     // ç»§æ‰¿ SuperType å¹¶ä¼ å‚
     SuperType.call(this, "Nicholas")
     // å®ä¾‹å±æ€§
     this.age = 29
   }
   let instance = new SubType()
   console.log(instance.name) // "Nicholas";
   console.log(instance.age) // 29
   ```

**äºŒã€å€Ÿç”¨æ„é€ å‡½æ•°ç»§æ‰¿**

**é‡ç‚¹ï¼š** ç”¨.call()å’Œ.apply()å°†çˆ¶ç±»æ„é€ å‡½æ•°å¼•å…¥å­ç±»å‡½æ•°ï¼ˆåœ¨å­ç±»å‡½æ•°ä¸­åšäº†çˆ¶ç±»å‡½æ•°çš„è‡ªæ‰§è¡Œï¼ˆå¤åˆ¶ï¼‰ï¼‰

**ç‰¹ç‚¹ï¼š**

1. åªç»§æ‰¿äº†çˆ¶ç±»æ„é€ å‡½æ•°çš„å±æ€§ï¼Œæ²¡æœ‰ç»§æ‰¿çˆ¶ç±»åŸå‹çš„å±æ€§ã€‚
2. è§£å†³äº†åŸå‹é“¾ç»§æ‰¿ç¼ºç‚¹ 1ã€2ã€3ã€‚
3. å¯ä»¥ç»§æ‰¿å¤šä¸ªæ„é€ å‡½æ•°å±æ€§ï¼ˆcall å¤šä¸ªï¼‰ã€‚
4. åœ¨å­å®ä¾‹ä¸­å¯å‘çˆ¶å®ä¾‹ä¼ å‚ã€‚
5. è§£å†³äº†å¼•ç”¨å€¼é—®é¢˜

**ç¼ºç‚¹ï¼š**

1. åªèƒ½ç»§æ‰¿çˆ¶ç±»æ„é€ å‡½æ•°çš„å±æ€§ã€‚
2. æ— æ³•å®ç°æ„é€ å‡½æ•°çš„å¤ç”¨ã€‚
3. æ¯ä¸ªæ–°å®ä¾‹éƒ½æœ‰çˆ¶ç±»æ„é€ å‡½æ•°çš„å‰¯æœ¬ï¼Œè‡ƒè‚¿ã€‚

```js
function SuperType(name) {
  this.name = name
}
function SubType() {
  // ç»§æ‰¿ SuperType å¹¶ä¼ å‚
  SuperType.call(this, "Nicholas")
  // å®ä¾‹å±æ€§
  this.age = 29
}
let instance = new SubType()
console.log(instance.name) // "Nicholas";
console.log(instance.age) // 29
```

**ä¸‰ã€ç»„åˆç»§æ‰¿ï¼ˆç»„åˆåŸå‹é“¾ç»§æ‰¿å’Œå€Ÿç”¨æ„é€ å‡½æ•°ç»§æ‰¿ï¼‰ï¼ˆå¸¸ç”¨ï¼‰**

**é‡ç‚¹ï¼š** ç»“åˆäº†ä¸¤ç§æ¨¡å¼çš„ä¼˜ç‚¹ï¼Œ**ä¼ å‚å’Œå¤ç”¨**

```js
function SuperType(name) {
  this.name = name
  this.colors = ["red", "blue", "green"]
}
SuperType.prototype.sayName = function () {
  console.log(this.name)
}
function SubType(name, age) {
  // ç»§æ‰¿å±æ€§
  SuperType.call(this, name) //// ç¬¬ä¸€æ¬¡è°ƒç”¨ SuperType()
  this.age = age
}
// ç»§æ‰¿æ–¹æ³•
SubType.prototype = new SuperType() // ç¬¬äºŒæ¬¡è°ƒç”¨ SuperType()
SubType.prototype.sayAge = function () {
  console.log(this.age)
}
let instance1 = new SubType("Nicholas", 29)
console.log("instance1=>", instance1)
instance1.colors.push("black")
console.log(instance1.colors) // "red,blue,green,black"
instance1.sayName() // "Nicholas";
instance1.sayAge() // 29
let instance2 = new SubType("Greg", 27)
console.log(instance2.colors) // "red,blue,green"
instance2.sayName() // "Greg";
instance2.sayAge() // 27
```

**ç‰¹ç‚¹ï¼š**

1. å¯ä»¥ç»§æ‰¿çˆ¶ç±»åŸå‹ä¸Šçš„å±æ€§ï¼Œå¯ä»¥ä¼ å‚ï¼Œå¯å¤ç”¨ã€‚
2. æ¯ä¸ªæ–°å®ä¾‹å¼•å…¥çš„æ„é€ å‡½æ•°å±æ€§æ˜¯ç§æœ‰çš„ã€‚

**ç¼ºç‚¹ï¼š** ç»„åˆç»§æ‰¿å…¶å®ä¹Ÿå­˜åœ¨æ•ˆç‡é—®é¢˜ã€‚æœ€ä¸»è¦çš„æ•ˆç‡é—®é¢˜å°±æ˜¯ **çˆ¶ç±»æ„é€ å‡½æ•°å§‹ç»ˆä¼šè¢«è°ƒç”¨ä¸¤æ¬¡** ï¼šä¸€æ¬¡åœ¨æ˜¯åˆ›å»ºå­ç±»åŸå‹æ—¶è°ƒç”¨ï¼Œå¦ä¸€æ¬¡æ˜¯åœ¨å­ç±»æ„é€ å‡½æ•°ä¸­è°ƒç”¨

å››ã€åŸå‹å¼ç»§æ‰¿

**é‡ç‚¹ï¼š** ç”¨ä¸€ä¸ªå‡½æ•°åŒ…è£…ä¸€ä¸ªå¯¹è±¡ï¼Œç„¶åè¿”å›è¿™ä¸ªå‡½æ•°çš„è°ƒç”¨ï¼Œè¿™ä¸ªå‡½æ•°å°±å˜æˆäº†ä¸ªå¯ä»¥éšæ„å¢æ·»å±æ€§çš„å®ä¾‹æˆ–å¯¹è±¡ã€‚object.create()å°±æ˜¯è¿™ä¸ªåŸç†ã€‚

```js
//æ ¸å¿ƒä»£ç 
function object(o) {
  function F() {}
  F.prototype = o
  return new F()
}

let person = {
  name: "Nicholas",
  friends: ["Shelby", "Court", "Van"],
}
let anotherPerson = object(person)
anotherPerson.name = "Greg"
anotherPerson.friends.push("Rob")
let yetAnotherPerson = object(person)
yetAnotherPerson.name = "Linda"
yetAnotherPerson.friends.push("Barbie")
console.log(person.friends) // "Shelby,Court,Van,Rob,Barbie"
```

**ç‰¹ç‚¹ï¼š** ç±»ä¼¼äºå¤åˆ¶ä¸€ä¸ªå¯¹è±¡ï¼Œç”¨å‡½æ•°æ¥åŒ…è£…ã€‚

**ç¼ºç‚¹ï¼š**

1. æ‰€æœ‰å®ä¾‹éƒ½ä¼šç»§æ‰¿åŸå‹ä¸Šçš„å±æ€§ã€‚
2. æ— æ³•å®ç°å¤ç”¨ã€‚ï¼ˆæ–°å®ä¾‹å±æ€§éƒ½æ˜¯åé¢æ·»åŠ çš„ï¼‰

> åŸå‹å¼ç»§æ‰¿éå¸¸é€‚åˆä¸éœ€è¦å•ç‹¬åˆ›å»ºæ„é€ å‡½æ•°ï¼Œä½†ä»ç„¶éœ€è¦åœ¨å¯¹è±¡é—´å…±äº«ä¿¡æ¯çš„åœºåˆã€‚ä½†è¦è®°ä½ï¼Œå±æ€§ä¸­åŒ…å«çš„å¼•ç”¨å€¼å§‹ç»ˆä¼šåœ¨ç›¸å…³å¯¹è±¡é—´å…±äº«ï¼Œè·Ÿä½¿ç”¨åŸå‹æ¨¡å¼æ˜¯ä¸€æ ·çš„

### webpack åŠ vite çš„åŒºåˆ«

Webpack å’Œ Vite çš„æ ¸å¿ƒå·®å¼‚åœ¨äºæ„å»ºç†å¿µä¸åŒï¼šWebpack æ˜¯æ‰“åŒ…å¯¼å‘çš„æ„å»ºå·¥å…·ï¼Œå®ƒå°†æ‰€æœ‰æ¨¡å—æ‰“åŒ…ä¸º bundle å†å¯åŠ¨ï¼›è€Œ Vite æ˜¯åŸºäºæµè§ˆå™¨åŸç”Ÿ ESM çš„æŒ‰éœ€åŠ è½½ï¼Œå®ƒåœ¨å¼€å‘æ—¶ä¸æ‰“åŒ…ï¼Œç›´æ¥é€šè¿‡ HTTP æŒ‰éœ€åŠ è½½æ¨¡å—ï¼Œå¯åŠ¨é€Ÿåº¦éå¸¸å¿«ã€‚

åœ¨å¼€å‘ä½“éªŒä¸Šï¼ŒVite ç§’å¯åŠ¨ï¼ŒHMR æ›´å¿«ï¼Œè°ƒè¯•ä½“éªŒä¹Ÿæ›´æ¥è¿‘æºç ï¼›Webpack åœ¨å¤§é¡¹ç›®ä¸­æ’ä»¶ç”Ÿæ€æˆç†Ÿï¼Œæ„å»ºçµæ´»æ€§é«˜ã€‚

æˆ‘åœ¨ Vue3 é¡¹ç›®ä¸­ä¸»è¦ä½¿ç”¨ Viteï¼Œç»“åˆ vite-plugin-vue å’Œ unplugin ç³»åˆ—æ’ä»¶ï¼Œå¼€å‘ä½“éªŒå¾ˆå¥½ï¼›ä½†å¦‚æœé‡åˆ°éœ€è¦é«˜åº¦å®šåˆ¶çš„åœºæ™¯ï¼Œæ¯”å¦‚å¾®å‰ç«¯ã€Module Federationï¼Œæˆ‘ä»¬ä¹Ÿä¼šé€‰æ‹© Webpackã€‚

### å®ä»»åŠ¡å¾®ä»»åŠ¡

```tex
ä¸»çº¿ç¨‹å¼€å§‹
â†“
æ‰§è¡ŒåŒæ­¥ä»£ç 
â†“
æ‰§è¡Œå®Œä¸€ä¸ªå®ä»»åŠ¡ï¼ˆæ¯”å¦‚ setTimeoutï¼‰
â†“
ç«‹å³æ‰§è¡Œæ‰€æœ‰å¾®ä»»åŠ¡ï¼ˆPromise.thenã€MutationObserverï¼‰
â†“
DOMæ›´æ–° â†’ requestAnimationFrame
â†“
ä¸‹ä¸€è½®å®ä»»åŠ¡
```

> javaScript æ˜¯å•çº¿ç¨‹çš„ï¼Œæ‰§è¡Œé¡ºåºç”±äº‹ä»¶å¾ªç¯ï¼ˆEvent Loopï¼‰æ§åˆ¶ã€‚ä¸€ä¸ªå®Œæ•´çš„æ‰§è¡Œå‘¨æœŸå«ä¸€ä¸ªå®ä»»åŠ¡ï¼ˆmacro taskï¼‰ï¼Œæ¯”å¦‚ `setTimeout`ã€ä¸»çº¿ç¨‹ä»£ç ç­‰ã€‚è€Œå¾®ä»»åŠ¡ï¼ˆmicro taskï¼‰æ˜¯åœ¨æ¯ä¸ªå®ä»»åŠ¡æ‰§è¡Œåç«‹å³æ‰§è¡Œçš„ä»»åŠ¡ï¼Œå¦‚ `Promise.then`ã€`MutationObserver`ã€‚
>
> å¾®ä»»åŠ¡æ‰§è¡Œä¼˜å…ˆçº§é«˜äºå®ä»»åŠ¡ã€‚æ¯æ¬¡å®ä»»åŠ¡æ‰§è¡Œå®Œåï¼Œéƒ½ä¼š**æ¸…ç©ºå¾®ä»»åŠ¡é˜Ÿåˆ—**ï¼Œå†å¼€å§‹ä¸‹ä¸€è½®å®ä»»åŠ¡ã€‚æ¯”å¦‚åœ¨ `setTimeout` å’Œ `Promise` æ··ç”¨æ—¶ï¼Œ`Promise.then` æ€»æ˜¯æ¯” `setTimeout` æ›´æ—©æ‰§è¡Œã€‚

### this æŒ‡å‘

```js
â‘  é»˜è®¤ç»‘å®šï¼ˆç‹¬ç«‹å‡½æ•°è°ƒç”¨ï¼‰

function show() {
  console.log(this);
}
show(); // éä¸¥æ ¼æ¨¡å¼ï¼šwindowï¼Œä¸¥æ ¼æ¨¡å¼ï¼šundefined



â‘¡ éšå¼ç»‘å®šï¼ˆé€šè¿‡å¯¹è±¡è°ƒç”¨ï¼‰
const obj = {
  name: 'Vue',
  say() {
    console.log(this.name);
  }
};
obj.say(); // this â†’ obj


â‘¢ æ˜¾å¼ç»‘å®šï¼ˆcall / apply / bindï¼‰
function show() {
  console.log(this.name);
}
const obj = { name: 'React' };
show.call(obj);  // this â†’ obj
show.apply(obj); // this â†’ obj
const bound = show.bind(obj);
bound(); // this â†’ obj

â‘£ new æ„é€ å‡½æ•°ç»‘å®šï¼ˆæ„é€ å‡½æ•°ä¸­ï¼‰
function User(name) {
  this.name = name;
}
const u = new User('å¼ ä¸‰');
console.log(u.name); // this â†’ æ–°åˆ›å»ºçš„å¯¹è±¡

â‘¤ ç®­å¤´å‡½æ•°ï¼ˆæ²¡æœ‰è‡ªå·±çš„ thisï¼‰
const obj = {
  name: 'Vue',
  say: () => {
    console.log(this.name);
  }
};
obj.say(); // this â†’ å¤–å±‚ä½œç”¨åŸŸï¼ˆé€šå¸¸æ˜¯ windowï¼‰

// æ­£ç¡®ç”¨æ³•ï¼š
const obj2 = {
  name: 'React',
  say() {
    const inner = () => {
      console.log(this.name);
    }
    inner(); // this â†’ obj2ï¼ˆç»§æ‰¿è‡ªå¤–å±‚å‡½æ•°ï¼‰
  }
};
obj2.say(); // React


```

## ä¸­çº§é¢è¯•é¢˜

### hybrid åŒå‘é€šä¿¡æ–¹å¼ï¼ŒElectron é€šä¿¡æ–¹å¼

1.hybrid

- | å¸¸è§æ–¹å¼                                          | å¹³å°        | è¯´æ˜                                |
  | ------------------------------------------------- | ----------- | ----------------------------------- |
  | `window.webkit.messageHandlers.xxx.postMessage()` | iOS         | iOS WKWebView æ ‡å‡†é€šä¿¡æ–¹å¼          |
  | `window.Android.xxx()`                            | Android     | Android WebView ä¸­æš´éœ²åŸç”Ÿæ¥å£      |
  | URL Scheme                                        | é€šç”¨        | JS æ„é€ ä¸€ä¸ªç‰¹æ®Š URLï¼ŒåŸç”Ÿæ‹¦æˆªè·³è½¬   |
  | prompt æ‹¦æˆª                                       | Android/iOS | JS è°ƒç”¨ promptï¼ŒNative æ‹¦æˆªå…¶è°ƒç”¨   |
  | JSBridge æ¡†æ¶                                     | é€šç”¨        | è‡ªå®šä¹‰æ¡¥æ¥å°è£…ï¼ˆå¦‚ WeixinJSBridgeï¼‰ |

  JSBridge æ¡†æ¶

```js
import dsBridge from "dsbridge"
/**
 * è·³æœ¬åœ°è®¢å•ä¸­å¿ƒ-è®¢å•è¯¦æƒ…é¡µ
 * @param args { "orderNo": String }
 */
export function viewOrder(data: IOrdering) {
  return dsBridge.call("rt-default.viewOrder", JSON.stringify(data))
}

/**
 * è·³æœ¬åœ°è®¢å•ä¸­å¿ƒ-è®¢å•è¯¦æƒ…é¡µ
 * @param args { "orderNo": String }
 */
export function refreshPage(callback: Fn) {
  dsBridge.register("depoist.refreshPage", (args: any[]) => {
    callback(args)
  })
}
```

2. Electron

```js
// æ¸²æŸ“è¿›ç¨‹ renderer.js
const { ipcRenderer } = require("electron")
ipcRenderer.send("show-alert", "Hello from renderer")

// ä¸»è¿›ç¨‹ main.js
const { ipcMain } = require("electron")
ipcMain.on("show-alert", (event, arg) => {
  console.log(arg) // "Hello from renderer"
})
```

**safri/å®‰å“ webview çš„å†…æ ¸åˆ†åˆ«æ˜¯ä»€**

OS ä¸Šæ‰€æœ‰ WebView å’Œ Safari æµè§ˆå™¨ç»Ÿä¸€ä½¿ç”¨ WebKit å†…æ ¸ï¼Œè¿™æ˜¯ Apple çš„å¹³å°é™åˆ¶ã€‚Android ä¸Šåˆ™ä½¿ç”¨ Chromiumï¼ˆBlink å¼•æ“ï¼‰ä½œä¸º WebView çš„æ¸²æŸ“å†…æ ¸ï¼Œä» Android 5.0 èµ· WebView å¯ç‹¬ç«‹æ›´æ–°ï¼Œå’Œ Chrome å…±ç”¨å†…æ ¸ã€‚

è¿™ä¹Ÿè§£é‡Šäº†ä¸ºä»€ä¹ˆæˆ‘ä»¬åœ¨åš H5 é¡µé¢å…¼å®¹æ—¶ï¼Œ**iOS WebView å’Œ Safari è¡¨ç°åŸºæœ¬ä¸€è‡´**ï¼Œè€Œ Android å„å®¶ WebView åˆ™å¯èƒ½å› ç³»ç»Ÿç‰ˆæœ¬æˆ–å‚å•†å®šåˆ¶è€Œæœ‰æ‰€å·®å¼‚ã€‚

### iframe

æ¨èæ–¹æ³•ï¼š`postMessage`ï¼ˆæ ‡å‡†å®‰å…¨ã€è·¨åŸŸæ”¯æŒï¼‰

> æ— è®º iframe æ˜¯å¦åŒæºï¼Œ`postMessage` éƒ½æ˜¯æ¨èçš„é€šä¿¡æ–¹å¼ã€‚

```js
ğŸ‘ˆ ä¸»é¡µé¢å‘é€æ¶ˆæ¯ç»™ iframeï¼š
const iframe = document.getElementById('myIframe');
iframe.contentWindow.postMessage({ type: 'ping', data: 123 }, '*');

ğŸ‘‰ iframe æ¥æ”¶æ¶ˆæ¯ï¼š
window.addEventListener('message', (event) => {
  console.log('æ”¶åˆ°ä¸»é¡µé¢æ¶ˆæ¯:', event.data);
});


ğŸ‘‰ iframe å‘ä¸»é¡µé¢å‘é€æ¶ˆæ¯ï¼š
window.parent.postMessage({ type: 'pong', msg: 'hello from iframe' }, '*');
ğŸ‘ˆ ä¸»é¡µé¢ç›‘å¬ï¼š
window.addEventListener('message', (event) => {
  console.log('æ”¶åˆ° iframe æ¶ˆæ¯:', event.data);
});

âœ… å®‰å…¨å»ºè®®
event.origin æ ¡éªŒæ¥æºï¼š

if (event.origin === 'https://trusted.com') { ... }
targetOrigin å‚æ•°ä¸è¦å†™ '*'ï¼Œæœ€å¥½å†™æ˜ç›®æ ‡æ¥æº


```

å…¶ä»– iframe é€šä¿¡æ–¹å¼ï¼ˆä¸æ¨è/å—é™ï¼‰

| æ–¹æ³•                                    | é™åˆ¶                               |
| --------------------------------------- | ---------------------------------- |
| åŒæºç›´æ¥è°ƒç”¨ï¼ˆiframe.contentWindow.fnï¼‰ | åªèƒ½åŒæº                           |
| location.hash + è½®è¯¢                    | ä½æ•ˆã€ä¸å®‰å…¨                       |
| localStorage + storage äº‹ä»¶             | ä¸é€‚åˆ iframe åœºæ™¯                 |
| BroadcastChannel                        | ç°ä»£æµè§ˆå™¨æ”¯æŒï¼Œé€‚åˆå¤šä¸ªçª—å£é—´é€šä¿¡ |

> iframe ä¸ä¸»é¡µé¢å¯ä»¥é€šè¿‡ `postMessage` å®ç°åŒå‘é€šä¿¡ï¼Œæ”¯æŒè·¨åŸŸã€æ€§èƒ½é«˜ã€å®‰å…¨æ€§å¼ºã€‚ä¸»é¡µé¢å¯ä»¥ä½¿ç”¨ `iframe.contentWindow.postMessage()`ï¼Œiframe å¯ä»¥ä½¿ç”¨ `window.parent.postMessage()`ã€‚
>
> è€Œ WebView æ˜¯ç§»åŠ¨ App ä¸­åµŒå…¥ç½‘é¡µçš„ä¸€ç§å®¹å™¨ï¼Œå±äºåŸç”Ÿæ§ä»¶ã€‚å®ƒä¸å—æµè§ˆå™¨åŒæºé™åˆ¶ï¼Œä½†é»˜è®¤æ— æ³•è®¿é—®åŸç”Ÿèƒ½åŠ›ï¼Œéœ€è¦é€šè¿‡ JSBridge æ¥å®ç° Web â†” Native é€šä¿¡ï¼Œå¸¸ç”¨äºæ··åˆåº”ç”¨å¼€å‘åœºæ™¯ã€‚

### WebView å’Œ iframe çš„åŒºåˆ«

| é¡¹ç›®           | iframe                       | WebView                                            |
| -------------- | ---------------------------- | -------------------------------------------------- |
| æœ¬è´¨           | æµè§ˆå™¨ä¸­åµŒå¥—ç½‘é¡µ             | åŸç”Ÿ App å†…åµŒç½‘é¡µ                                  |
| æ‰€åœ¨ç¯å¢ƒ       | æµè§ˆå™¨                       | ç§»åŠ¨ Appï¼ˆiOS/Androidï¼‰                            |
| å®‰å…¨é™åˆ¶       | å—åŒæºç­–ç•¥é™åˆ¶               | åŸç”Ÿæ§åˆ¶æƒé™ï¼Œå¦‚ç¦ JSã€ç¦è°ƒè¯•                      |
| èƒ½åŠ›èŒƒå›´       | æµè§ˆå™¨èƒ½è®¿é—®çš„åŠŸèƒ½           | å¯ä»¥é€šè¿‡ JSBridge è®¿é—®åŸç”Ÿèƒ½åŠ›ï¼ˆæ‘„åƒå¤´ã€å®šä½ç­‰ï¼‰   |
| ä¸ä¸»é¡µé¢é€šä¿¡   | `postMessage`ã€è°ƒç”¨çˆ¶çª—å£    | JSBridge é€šä¿¡ï¼šWeb â†” Native                        |
| å¤šè¿›ç¨‹/çº¿ç¨‹    | åŒä¸€ä¸ªæµè§ˆå™¨ä¸Šä¸‹æ–‡           | åŸç”Ÿç‹¬ç«‹è¿›ç¨‹æˆ–çº¿ç¨‹ï¼ˆiOS/Androidï¼‰                  |
| æ˜¯å¦èƒ½è®¿é—® DOM | å¯ä»¥è®¿é—®åµŒå¥—å†…å®¹ï¼ˆåŒæºï¼‰     | å¯ä»¥è®¿é—®é¡µé¢ DOMï¼Œä½†**ä¸èƒ½è®¿é—®å®¿ä¸» App çš„ DOM/UI** |
| åœºæ™¯           | å¤æ‚é¡µé¢åµŒå¥—/å¹¿å‘Š/æ²™ç›’åŒ–é¡µé¢ | æ··åˆ Appã€UniAppã€å¾®ä¿¡å°ç¨‹åº WebView é¡µç­‰          |

### å‘å¸ƒè®¢é˜…

```js
class EventBus {
  constructor() {
    this.events = {} // å­˜å‚¨äº‹ä»¶ä¸å›è°ƒåˆ—è¡¨
  }

  // è®¢é˜…
  on(event, callback) {
    if (!this.events[event]) {
      this.events[event] = []
    }
    this.events[event].push(callback)
  }

  // å‘å¸ƒ
  emit(event, ...args) {
    if (this.events[event]) {
      this.events[event].forEach((cb) => cb(...args))
    }
  }

  // å–æ¶ˆè®¢é˜…
  off(event, callback) {
    if (!this.events[event]) return
    this.events[event] = this.events[event].filter((cb) => cb !== callback)
  }

  // åªæ‰§è¡Œä¸€æ¬¡
  once(event, callback) {
    const wrapper = (...args) => {
      callback(...args)
      this.off(event, wrapper)
    }
    this.on(event, wrapper)
  }
}
```

**åº”ç”¨åœºæ™¯**

ç»„ä»¶é€šä¿¡ï¼ˆéçˆ¶å­ç»„ä»¶ï¼‰

è‡ªå®šä¹‰äº‹ä»¶ï¼ˆå¦‚å…¨å±€äº‹ä»¶æ€»çº¿ï¼‰

æ—¥å¿—ã€åŸ‹ç‚¹ä¸ŠæŠ¥

çŠ¶æ€æ›´æ–°é€šçŸ¥ï¼ˆå¦‚ Redux middlewareï¼‰

å¾®å‰ç«¯å­åº”ç”¨é—´é€šä¿¡

å››ã€ç°æˆæ–¹æ¡ˆæœ‰å“ªäº›ï¼Ÿ

| åç§°              | ç±»å‹              | ç®€ä»‹                           |
| ----------------- | ----------------- | ------------------------------ |
| **mitt**          | è½»é‡åº“            | ä»… 200 è¡Œï¼Œé›¶ä¾èµ–ï¼Œé«˜æ€§èƒ½      |
| **EventEmitter3** | ç±» Node çš„å®ç°    | æ”¯æŒå‘½åç©ºé—´ã€onceã€æ€§èƒ½å¥½     |
| **Vue EventBus**  | Vue2 å…¨å±€é€šä¿¡æ–¹æ¡ˆ | å·²è¢« Vue3 Composition API æ›¿ä»£ |
| **RxJS**          | å“åº”å¼ç¼–ç¨‹        | æ”¯æŒæµæ§åˆ¶ã€æ“ä½œç¬¦ï¼Œå­¦ä¹ æ›²çº¿é«˜ |
| **PubSubJS**      | è½»é‡å‘å¸ƒè®¢é˜…åº“    | æ”¯æŒåŒæ­¥/å¼‚æ­¥                  |
| **TinyEmitter**   | éå¸¸å°çš„å®ç°      | ä»…å‡ ç™¾å­—èŠ‚ï¼Œç”¨äºå°é¡¹ç›®         |

### ä»€ä¹ˆæ˜¯åŸå­æ€§

**åŸå­æ€§ï¼ˆAtomicityï¼‰\*\*æŒ‡çš„æ˜¯\*\*ä¸€ä¸ªæ“ä½œè¦ä¹ˆå…¨éƒ¨å®Œæˆï¼Œè¦ä¹ˆå®Œå…¨ä¸åš**ï¼Œ**ä¸­é—´ä¸ä¼šè¢«ä¸­æ–­æˆ–åˆ†å‰²**ã€‚

è™½ç„¶ JS æ˜¯å•çº¿ç¨‹çš„ï¼Œä½†ä¹Ÿæœ‰â€œåŸå­æ€§â€é—®é¢˜ï¼Œæ¯”å¦‚ï¼š

- **localStorage å¹¶éåŸå­æ“ä½œ**ï¼ˆå¤šä¸ª Tab åŒæ—¶è¯»å†™å¯èƒ½å†²çªï¼‰
- **å¼‚æ­¥ Promise ä¸èƒ½æ‰“æ–­**ï¼ˆå®ƒæ˜¯åŸå­æ‰§è¡Œçš„ï¼‰

å‰ç«¯çŠ¶æ€ç®¡ç† ä½¿ç”¨æ‰¹é‡æ›´æ–°æœºåˆ¶ï¼ˆå¦‚ React æ‰¹é‡ setStateï¼‰

### vue é¡¹ç›®æ ¸å¿ƒæ–‡ä»¶å¤¹

```bash
â”œâ”€â”€ src/                  # æ ¸å¿ƒæºç ç›®å½•
â”‚   â”œâ”€â”€ assets/           # é™æ€èµ„æºï¼ˆå›¾ç‰‡ã€å­—ä½“ç­‰ï¼‰
â”‚   â”œâ”€â”€ components/       # é€šç”¨ç»„ä»¶ï¼ˆåŸºç¡€ UI ç»„ä»¶ï¼‰
â”‚   â”œâ”€â”€ views/            # é¡µé¢çº§ç»„ä»¶ï¼ˆå¯¹åº”è·¯ç”±ï¼‰
â”‚   â”œâ”€â”€ layouts/          # å¸ƒå±€ç»„ä»¶ï¼ˆå¦‚ä¾§è¾¹æ ã€å¯¼èˆªæ ï¼‰
â”‚   â”œâ”€â”€ router/           # è·¯ç”±é…ç½®ï¼ˆVue Routerï¼‰
â”‚   â”œâ”€â”€ store/            # çŠ¶æ€ç®¡ç†ï¼ˆPinia / Vuexï¼‰
â”‚   â”œâ”€â”€ composables/      # å¯å¤ç”¨çš„ç»„åˆå‡½æ•°ï¼ˆComposition APIï¼‰
â”‚   â”œâ”€â”€ directives/       # è‡ªå®šä¹‰æŒ‡ä»¤
â”‚   â”œâ”€â”€ utils/            # å·¥å…·å‡½æ•°åº“ï¼ˆå¦‚æ ¼å¼åŒ–ã€æ ¡éªŒç­‰ï¼‰
â”‚   â”œâ”€â”€ api/              # API è¯·æ±‚å°è£…ï¼ˆAxios å°è£…ã€æ¥å£ç®¡ç†ï¼‰
â”‚   â”œâ”€â”€ hooks/            # ä¸ composables ç±»ä¼¼ï¼Œç”¨äºå°è£…é€»è¾‘
â”‚   â”œâ”€â”€ types/            # TypeScript ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ locales/          # å›½é™…åŒ–èµ„æºï¼ˆi18nï¼‰
â”‚   â”œâ”€â”€ styles/           # å…¨å±€æ ·å¼ï¼ˆå¦‚ Tailwindã€å˜é‡ã€mixinï¼‰
â”‚   â”œâ”€â”€ App.vue           # æ ¹ç»„ä»¶
â”‚   â””â”€â”€ main.ts           # å…¥å£æ–‡ä»¶ï¼ˆåˆå§‹åŒ–åº”ç”¨ï¼‰
â”œâ”€â”€ public/               # å…¬å…±é™æ€èµ„æºç›®å½•ï¼ˆä¸ç» Webpack/Vite å¤„ç†ï¼‰
â”œâ”€â”€ vite.config.ts        # Vite é…ç½®æ–‡ä»¶
â”œâ”€â”€ tsconfig.json         # TypeScript é…ç½®
â””â”€â”€ package.json          # ä¾èµ–å’Œè„šæœ¬ç®¡ç†

è¿˜æœ‰ä¸€äº›æšä¸¾enum å¸¸é‡constantion

```

### vue åŒå‘ç»‘å®šåŸç†

> Vue 3 çš„å“åº”å¼æ ¸å¿ƒæ˜¯ï¼šé€šè¿‡ `Proxy` æ‹¦æˆªå¯¹è±¡å±æ€§è®¿é—®ï¼Œå®ç° `get` æ—¶**æ”¶é›†ä¾èµ–**ï¼Œ`set` æ—¶**è§¦å‘ä¾èµ–æ›´æ–°**ã€‚ä¾èµ–é€šè¿‡ **effect å‡½æ•°**æ³¨å†Œï¼Œå½¢æˆå“åº”é“¾ã€‚

1. **åˆ›å»ºå“åº”å¼å¯¹è±¡ï¼š`reactive`**

```js
import { reactive } from "vue"

const state = reactive({ count: 0 })

// packages/reactivity/src/reactive.ts
export function reactive(target) {
  return createReactiveObject(target, false, mutableHandlers)
}
```

å†…éƒ¨é€šè¿‡ `new Proxy(target, handler)` åˆ›å»ºä»£ç†å¯¹è±¡

æ‰€æœ‰çš„ get/set éƒ½ä¼šèµ°è¿› `mutableHandlers`

2. è®¿é—®å±æ€§æ—¶ï¼š`get â†’ track`

```js
// reactive object è¢«è®¿é—®æ—¶
get(target, key, receiver) {
  track(target, key)  // æ”¶é›†ä¾èµ–
  return Reflect.get(target, key, receiver)
}
```

#### `track()` åšäº†ä»€ä¹ˆï¼Ÿ

```
targetMap = WeakMap<target, Map<key, Set<effect>>>
```

- ä½¿ç”¨ `WeakMap` æŒ‰å¯¹è±¡å­˜å‚¨å“åº”å±æ€§
- æ¯ä¸ªå±æ€§ key æœ‰ä¸€ä¸ªä¾èµ– Setï¼Œå­˜å‚¨ç”¨åˆ°å®ƒçš„ effect å‡½æ•°

> âš ï¸ æ‰€æœ‰è®¿é—®å“åº”å¼æ•°æ®çš„ä»£ç ï¼Œå¿…é¡»åŒ…åœ¨ `effect(fn)` å†…éƒ¨ï¼ŒVue æ‰èƒ½çŸ¥é“è¿™ä¸ªå‡½æ•°ä¾èµ–äº†å“ªäº›å“åº”å¼æ•°æ®ã€‚

3. ä¿®æ”¹å±æ€§æ—¶ï¼š`set â†’ trigger`

```ts
set(target, key, value, receiver) {
  const result = Reflect.set(target, key, value, receiver)
  trigger(target, key)  // è§¦å‘ä¾èµ–
  return result
}
```

#### `trigger()` åšäº†ä»€ä¹ˆï¼Ÿ

- è¯»å– `targetMap[target][key]` ä¸­çš„ä¾èµ– Set
- éå†æ‰§è¡Œæ‰€æœ‰å‰¯ä½œç”¨å‡½æ•°ï¼ˆeffectï¼‰

```ts
depsMap.get(key).forEach((effect) => effect.run())
```

4. effect æ”¶é›†ä¸å“åº”æ›´æ–°ï¼ˆæ ¸å¿ƒæœºåˆ¶ï¼‰

```ts
effect(() => {
  console.log(state.count) // è®¿é—®ä¼šæ”¶é›†ä¾èµ–
})
```

- `effect()` ä¼šåˆ›å»ºä¸€ä¸ª `ReactiveEffect` å®ä¾‹
- è¿è¡Œ `fn()` æ—¶ï¼Œè‡ªåŠ¨è§¦å‘ `get` â†’ `track()` æ”¶é›†
- æ•°æ®å˜åŒ–æ—¶ â†’ `trigger()` â†’ æ‰¾åˆ°ç›¸å…³ effect â†’ `scheduler()` ä¸­é‡æ–°æ‰§è¡Œ

> âœ… è¿™å°±æ˜¯å“åº”å¼ä¾èµ–è¿½è¸ªç³»ç»Ÿï¼Œä¸å†ä½¿ç”¨ Vue 2 ä¸­çš„ Dep/Watcherï¼

> Vue 3 çš„åŒå‘æ•°æ®ç»‘å®šæ˜¯å»ºç«‹åœ¨å…¨æ–°çš„å“åº”å¼ç³»ç»Ÿä¹‹ä¸Šçš„ï¼Œæ ¸å¿ƒæ˜¯é€šè¿‡ `Proxy` æ‹¦æˆªå¯¹è±¡çš„ `get/set` æ“ä½œï¼Œå®ç°ä¾èµ–æ”¶é›†å’Œæ´¾å‘ã€‚Vue å†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ª `targetMap`ï¼ˆWeakMap åµŒå¥—ç»“æ„ï¼‰æ¥æ˜ å°„æ¯ä¸ªå±æ€§åˆ°å®ƒä¾èµ–çš„å‰¯ä½œç”¨å‡½æ•°ï¼ˆeffectï¼‰ã€‚å½“æˆ‘ä»¬ä½¿ç”¨ `reactive` åˆ›å»ºå“åº”å¼å¯¹è±¡åï¼Œè®¿é—®å±æ€§ä¼šè§¦å‘ `track` æ”¶é›†ä¾èµ–ï¼Œä¿®æ”¹å±æ€§ä¼šè§¦å‘ `trigger` é€šçŸ¥ç›¸å…³å‰¯ä½œç”¨é‡æ–°æ‰§è¡Œï¼Œæœ€ç»ˆæ›´æ–° DOMã€‚
>
> å¯¹äº `v-model`ï¼Œå®ƒæœ¬è´¨æ˜¯ä¸€ä¸ªè¯­æ³•ç³–ï¼Œç­‰ä»·äº `:value + @input`ï¼Œä¾èµ–çš„æ­£æ˜¯è¿™ä¸ªå“åº”å¼æœºåˆ¶ã€‚ç›¸æ¯” Vue 2 çš„ `defineProperty + Dep/Watcher`ï¼ŒVue 3 çš„ Proxy æœºåˆ¶æ›´åŠ çµæ´»ã€æ”¯æŒåŠ¨æ€å±æ€§å’Œæ‡’ä»£ç†ï¼Œæ€§èƒ½ä¹Ÿæ›´ä¼˜ã€‚

### vue ä»£ç ä¸­ï¼Œä¸ºä»€ä¹ˆä¸å»ºè®®ä½¿ç”¨ querySelector

> Vue æ˜¯ä¸€ä¸ªå“åº”å¼æ¡†æ¶ï¼Œæ¨èä»¥â€œæ•°æ®é©±åŠ¨è§†å›¾â€çš„æ–¹å¼å¼€å‘ï¼Œç›´æ¥ä½¿ç”¨ `document.querySelector` å±äºå‘½ä»¤å¼æ“ä½œï¼Œä¼šç ´åå“åº”å¼æœºåˆ¶ã€ç»„ä»¶å°è£…æ€§å’Œç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚å–è€Œä»£ä¹‹ï¼Œåº”é€šè¿‡ `ref` è·å– DOM å…ƒç´ ï¼Œé…åˆç”Ÿå‘½å‘¨æœŸé’©å­å’Œå“åº”å¼æ•°æ®æ¥æ§åˆ¶è¡Œä¸ºï¼Œèƒ½æ›´å®‰å…¨ã€æ›´å¯ç»´æŠ¤ã€‚

### ä½ çŸ¥é“å“ªäº› Vue3 æ–°ç‰¹æ€§?

- Composition API

  - ç»„åˆå¼ API (å“åº”å¼ API `ref()ã€reactive()`ï¼Œç”Ÿå‘½å‘¨æœŸé’©å­`onMounted()ã€onUnmounted()`ï¼Œä¾èµ–æ³¨å…¥`inject()ã€provide()`)

- SFC Composition API Syntax Sugar `(<script setup>)`

  - å•æ–‡ä»¶ç»„åˆå¼ API è¯­æ³•ç³–(setup è¯­æ³•ç³–)
  - è®©ä»£ç æ›´ç®€æ´ï¼Œæ€§èƒ½æ›´å¥½ï¼ˆä¸éœ€è¦å€ŸåŠ©ä»£ç†å¯¹è±¡ï¼‰ã€‚

- Teleport

  - ç±»ä¼¼äº React ä¸­çš„ Portal ä¼ é€é—¨ç»„ä»¶ï¼ŒæŒ‡å®šå°†ç»„ä»¶æ¸²æŸ“åˆ°æŸä¸ªå®¹å™¨ä¸­ã€‚

  - ç»å¸¸ç”¨äºå¤„ç†å¼¹çª—ç»„ä»¶å’Œæ¨¡æ€æ¡†ç»„ä»¶ã€‚

    ```vue
    <button @click="open = true">æ‰“å¼€æ¨¡æ€æ¡†</button>
    <Teleport to="body">
      <div v-if="open" class="modal">
        <button @click="open = false">å…³é—­</button>
      </div>
    </Teleport>
    ```

- Fragments

  - Fragmentï¼ˆç‰‡æ®µï¼‰Vue3 ä¸­å…è®¸ç»„ä»¶ä¸­åŒ…å«å¤šä¸ªèŠ‚ç‚¹ã€‚æ— éœ€å¼•å…¥é¢å¤–çš„ DOM å…ƒç´ ã€‚

- Emits Component Option

  - Vue3 ä¸­é»˜è®¤ç»‘å®šçš„äº‹ä»¶ä¼šè¢«ç»‘å®šåˆ°æ ¹å…ƒç´ ä¸Šã€‚é€šè¿‡ Emits å±æ€§å¯å°†äº‹ä»¶ä»`attrs` ä¸­ç§»é™¤ã€‚

- createRenderer API from @vue/runtime-core to create custom renderers

  - æä¾›è‡ªå®šä¹‰æ¸²æŸ“å™¨ï¼Œå¯ä»¥åœ¨é DOM ç¯å¢ƒä¸­ä½¿ç”¨ Vue çš„è¿è¡Œæ—¶ã€‚

- SFC State-driven CSS Variables (v-bind in ` <style>`)

  - åœ¨ css ä¸­ä½¿ç”¨ v-bind ç»‘å®šæ ·å¼

  ```scss
  background: v-bind(color);
  ```

- SFC `<style scoped>` can now include global rules or rules that target only slotted content

  - åœ¨ä½œç”¨åŸŸæ ·å¼ä¸­å¯ä»¥åŒ…å«å…¨å±€è§„åˆ™æˆ–åªé’ˆå¯¹æ’æ§½å†…å®¹çš„è§„åˆ™

  ```scss
  /* è·¨ç»„ä»¶ä¿®æ”¹ç»„ä»¶å†…æ ·å¼ */
  .parent :deep(h1) {
    color: red;
  }
  /* æ§åˆ¶å…¨å±€æ ·å¼ */
  :global(.root) {
    width: 100px;
    height: 100px;
    background: yellow;
  }
  /* æ§åˆ¶æ’æ§½å†…å®¹çš„æ ·å¼ */
  :slotted(.child) {
    color: red;
  }
  ```

- Suspense experimental

  - ä¸»è¦çš„ä½œç”¨ä¼˜é›…åœ°å¤„ç†å¼‚æ­¥ç»„ä»¶çš„åŠ è½½çŠ¶æ€

  vue

  ```
  <Suspense>
      <template #default>
          <!-- å¯ä»¥é…åˆasync setupä½¿ç”¨ -->
          <AsyncComponent></AsyncComponent>
      </template>
      <template #fallback>
          æ­£åœ¨åŠ è½½å¼‚æ­¥ç»„ä»¶...
      </template>
  </Suspense>
  ```

### vue2 å’Œ vue3 çš„åŒºåˆ«

- æ€§èƒ½ä¼˜åŒ–ï¼ˆæ›´å¿«ï¼‰ï¼š
  - ä½¿ç”¨äº†**Proxy**æ›¿ä»£ Object.defineProperty å®ç°å“åº”å¼ã€‚ï¼ˆä¸ºä»€ä¹ˆï¼ŸdefineProperty éœ€è¦å¯¹å±æ€§è¿›è¡Œé€’å½’é‡å†™æ·»åŠ `getter`åŠ`setter` **æ€§èƒ½å·®**ï¼ŒåŒæ—¶æ–°å¢å±æ€§å’Œåˆ é™¤å±æ€§æ—¶æ— æ³•ç›‘æ§å˜åŒ–ï¼Œéœ€è¦$setã€$delete æ–¹æ³•ã€‚æ­¤æ–¹æ³•å¯¹æ•°ç»„åŠ«æŒæ€§èƒ½å·®ï¼ŒåŒæ—¶ä¸æ”¯æŒ map å’Œ set çš„æ•°æ®ç»“æ„ã€‚ï¼‰
  - æ¨¡æ¿ç¼–è¯‘ä¼˜åŒ–ã€‚ç»™åŠ¨æ€èŠ‚ç‚¹å¢æ·» PatchFlag æ ‡è®°ï¼›å¯¹é™æ€èŠ‚ç‚¹è¿›è¡Œé™æ€æå‡ï¼›å¯¹äº‹ä»¶è¿›è¡Œç¼“å­˜å¤„ç†ç­‰ã€‚
  - Diff ç®—æ³•ä¼˜åŒ–ï¼Œå…¨é‡ diff ç®—æ³•ä¸­é‡‡ç”¨æœ€é•¿é€’å¢å­åºåˆ—å‡å°‘èŠ‚ç‚¹çš„ç§»åŠ¨ã€‚åœ¨éå…¨é‡ diff ç®—æ³•ä¸­åªæ¯”è¾ƒåŠ¨æ€èŠ‚ç‚¹ï¼Œé€šè¿‡ PatchFlag æ ‡è®°æ›´æ–°åŠ¨æ€çš„éƒ¨åˆ†ã€‚
- ä½“ç§¯ä¼˜åŒ–ï¼ˆæ›´å°ï¼‰:
  - Vue3 ç§»é™¤äº†ä¸å¸¸ç”¨çš„ API
    - ç§»é™¤ inline-template (Vue2 ä¸­å°±ä¸æ¨èä½¿ç”¨)
    - $onã€$offã€$once ï¼ˆå¦‚æœæœ‰éœ€è¦å¯ä»¥é‡‡ç”¨ mitt åº“æ¥å®ç°ï¼‰
    - åˆ é™¤è¿‡æ»¤å™¨ ï¼ˆå¯ä»¥é€šè¿‡è®¡ç®—å±æ€§æˆ–è€…æ–¹æ³•æ¥å®ç°ï¼‰
    - $childrenç§»é™¤ ï¼ˆå¯ä»¥é€šè¿‡provideï¼Œinjectæ–¹æ³•æ„å»º$childrenï¼‰
    - ç§»é™¤`.sync` `.native`)ä¿®é¥°ç¬¦ (`.sync`é€šè¿‡ `v-model:xxx`å®ç°ï¼Œ`.native`ä¸º Vue3 ä¸­çš„é»˜è®¤è¡Œä¸º) ä»¥åŠä¸åœ¨æ”¯æŒ keycode ä½œä¸º`v-on`ä¿®é¥°ç¬¦ï¼ˆ@keyup.13 ä¸åœ¨æ”¯æŒï¼‰
    - ç§»é™¤å…¨å±€ APIã€‚Vue.componentã€Vue.useã€Vue.directive (å°†è¿™äº› api æŒ‚è½½åˆ°å®ä¾‹ä¸Š)
  - é€šè¿‡æ„å»ºå·¥å…· Tree-shaking æœºåˆ¶å®ç°æŒ‰éœ€å¼•å…¥ï¼Œå‡å°‘ç”¨æˆ·æ‰“åŒ…åä½“ç§¯ã€‚
- æ”¯æŒè‡ªå®šä¹‰æ¸²æŸ“å™¨ï¼š
  - ç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰æ¸²æŸ“ API è¾¾åˆ°è·¨å¹³å°çš„ç›®çš„ã€‚æ‰©å±•èƒ½åŠ›æ›´å¼ºï¼Œæ— éœ€æ”¹é€  Vue æºç ã€‚
- TypeScript æ”¯æŒï¼š
  - Vue3 æºç é‡‡ç”¨ Typescript æ¥è¿›è¡Œé‡å†™ , å¯¹ Ts çš„æ”¯æŒæ›´åŠ å‹å¥½ã€‚
- æºç ç»“æ„å˜åŒ–ï¼š
  - Vue3 æºç é‡‡ç”¨ monorepo æ–¹å¼è¿›è¡Œç®¡ç†ï¼Œå°†æ¨¡å—æ‹†åˆ†åˆ° package ç›®å½•ä¸­ï¼Œè§£è€¦åå¯å•ç‹¬ä½¿ç”¨ã€‚

### å¦‚ä½•çœ‹å¾… Composition API å’Œ Options API?

- åœ¨ Vue2 ä¸­é‡‡ç”¨çš„æ˜¯ OptionsAPI, ç”¨æˆ·æä¾›çš„ data,props,methods,computed,watch ç­‰å±æ€§ (ç”¨æˆ·ç¼–å†™å¤æ‚ä¸šåŠ¡é€»è¾‘ä¼šå‡ºç°**åå¤æ¨ªè·³é—®é¢˜**)
- Vue2 ä¸­æ‰€æœ‰çš„å±æ€§éƒ½æ˜¯é€šè¿‡`this`è®¿é—®ï¼Œ**`this`å­˜åœ¨æŒ‡å‘æ˜ç¡®é—®é¢˜**
- Vue2 ä¸­å¾ˆå¤š**æœªä½¿ç”¨æ–¹æ³•æˆ–å±æ€§ä¾æ—§ä¼šè¢«æ‰“**åŒ…ï¼Œå¹¶ä¸”**æ‰€æœ‰å…¨å±€ API éƒ½åœ¨ Vue å¯¹è±¡ä¸Šå…¬å¼€**ã€‚**Composition API å¯¹ tree-shaking æ›´åŠ å‹å¥½**ï¼Œä»£ç ä¹Ÿæ›´å®¹æ˜“å‹ç¼©ã€‚
- ç»„ä»¶é€»è¾‘å…±äº«é—®é¢˜ï¼Œ Vue2 é‡‡ç”¨ **mixins å®ç°ç»„ä»¶ä¹‹é—´çš„é€»è¾‘å…±äº«**ï¼› ä½†æ˜¯ä¼šæœ‰æ•°æ®æ¥æºä¸æ˜ç¡®ï¼Œå‘½åå†²çªç­‰é—®é¢˜ã€‚ Vue3 é‡‡ç”¨ **CompositionAPI æå–å…¬å…±é€»è¾‘éå¸¸æ–¹ä¾¿**

### Vue ä¸­å¦‚ä½•è¿›è¡Œä¾èµ–æ”¶é›†ï¼Ÿ

**vue2**

- æ¯ä¸ªå±æ€§éƒ½æ‹¥æœ‰è‡ªå·±çš„`dep`å±æ€§ï¼Œå­˜æ”¾ä»–æ‰€ä¾èµ–çš„ watcherï¼Œå½“å±æ€§å˜åŒ–åä¼šé€šçŸ¥è‡ªå·±å¯¹åº”çš„ watcher å»æ›´æ–°
- é»˜è®¤åœ¨åˆå§‹åŒ–æ—¶ä¼šè°ƒç”¨ render å‡½æ•°ï¼Œæ­¤æ—¶ä¼šè§¦å‘å±æ€§ä¾èµ–æ”¶é›† `dep.depend`
- å½“å±æ€§å‘ç”Ÿä¿®æ”¹æ—¶ä¼šè§¦å‘`watcher`æ›´æ–° `dep.notify()`

**Vue3**

- `Vue3`ä¸­ä¼šé€šè¿‡`Map`ç»“æ„å°†å±æ€§å’Œ`effect`æ˜ å°„èµ·æ¥ã€‚
- é»˜è®¤åœ¨åˆå§‹åŒ–æ—¶ä¼šè°ƒç”¨ render å‡½æ•°ï¼Œæ­¤æ—¶ä¼šè§¦å‘å±æ€§ä¾èµ–æ”¶é›†`track`ï¼Œ
- å½“å±æ€§å‘ç”Ÿä¿®æ”¹æ—¶ä¼šæ‰¾åˆ°å¯¹åº”çš„`effect`åˆ—è¡¨ä¾æ¬¡æ‰§è¡Œ`trigger`

### Vue ä¸­å¦‚ä½•æ£€æµ‹æ•°ç»„å˜åŒ–?

1.1 Vue2 ä¸­é‡‡ç”¨é‡å†™æ•°ç»„æ–¹æ³•çš„æ–¹å¼

- æ•°ç»„è€ƒè™‘æ€§èƒ½åŸå› æ²¡æœ‰ç”¨`defineProperty`å¯¹æ•°ç»„çš„æ¯ä¸€é¡¹è¿›è¡Œæ‹¦æˆªï¼Œè€Œæ˜¯é€‰æ‹©é‡å†™æ•°ç»„ï¼ˆ`push,shift,pop,splice,unshift,sort,reverse`ï¼‰æ–¹æ³•ã€‚**æ•°ç»„ä¸­å¦‚æœæ˜¯å¯¹è±¡æ•°æ®ç±»å‹ä¹Ÿä¼šè¿›è¡Œé€’å½’åŠ«æŒ**ã€‚

  1.2 Vue3 ç›´æ¥é‡‡ç”¨çš„æ˜¯ Proxy

- åœ¨ Vue 3.x ä¸­ï¼Œç›´æ¥ä½¿ç”¨ Proxy å®ç°äº†æ›´*é«˜æ•ˆ*å’Œ*ç²¾ç¡®*çš„æ•°ç»„å˜åŒ–æ£€æµ‹ï¼Œé€šè¿‡ Proxyï¼ŒVue å¯ä»¥æ•è·åˆ°æ•°ç»„ç´¢å¼•å’Œé•¿åº¦çš„å˜åŒ–ï¼Œä¸å†éœ€è¦é‡å†™æ•°ç»„çš„æ–¹æ³•ã€‚è¿™æ˜¯ Vue 3.x åœ¨æ€§èƒ½æ–¹é¢çš„ä¸€ä¸ªé‡è¦æ”¹è¿›ï¼ˆä½†æ˜¯ç”±äºä»£ç†é—®é¢˜ï¼Œè¿˜éœ€è¦å¯¹éƒ¨åˆ†æ£€æµ‹æ–¹æ³•è¿›è¡Œé‡å†™ï¼‰ã€‚

### requestAnimationFrame çš„å¸§ç‡æ˜¯å¤šå°‘ï¼Ÿèƒ½ä¿è¯ 60fps å—

### vue3 ä»æ•°æ®åˆ°é¡µé¢çš„æµç¨‹

```js
Reactive/Ref
   â†“ï¼ˆgetï¼‰
track ä¾èµ–æ”¶é›†
   â†“
ç”¨æˆ·è§¦å‘ set
   â†“
trigger â†’ effect
   â†“
scheduler æ¨å…¥ queue
   â†“ï¼ˆå¾®ä»»åŠ¡ï¼‰
æ‰§è¡Œ job â†’ render â†’ patch
   â†“
æ›´æ–° DOM
```

Vue3 åœ¨ setup ä¸­ä½¿ç”¨ `reactive` åˆ›å»ºæ•°æ®æ—¶ï¼Œä¼šé€šè¿‡ Proxy åŠ«æŒ get/setã€‚ç»„ä»¶é¦–æ¬¡æ¸²æŸ“æ—¶ä¼šè®¿é—®å“åº”å¼æ•°æ®ï¼Œè§¦å‘ `track()` å»ºç«‹ä¾èµ–ã€‚ä¹‹åå½“æ•°æ®å‘ç”Ÿæ”¹å˜æ—¶ï¼Œ`set` è§¦å‘ `trigger()`ï¼Œä¼šè°ƒåº¦å‰¯ä½œç”¨å‡½æ•°é‡æ–°æ‰§è¡Œï¼Œè¿™ä¸ªå‰¯ä½œç”¨å‡½æ•°ç”± Vue å†…éƒ¨çš„ `effect()` åŒ…è£¹ï¼Œå…¶ä¸­å¸¦æœ‰ schedulerï¼Œä¼šå¼‚æ­¥æ¨å…¥ä»»åŠ¡é˜Ÿåˆ—ä¸­ã€‚ä»»åŠ¡ flush æ—¶ï¼Œä¼šæ‰§è¡Œç»„ä»¶çš„ render å‡½æ•°ç”Ÿæˆæ–°çš„è™šæ‹Ÿ DOMï¼Œæœ€åé€šè¿‡ `patch()` å¯¹æ¯”å¹¶æ›´æ–°çœŸå® DOMã€‚

## é«˜çº§

### æœ‰æ²¡æœ‰åšè¿‡å‰ç«¯å…¼å®¹æ€§æ–¹é¢çš„å·¥ä½œ

1. CSS å…¼å®¹æ€§

- ä½¿ç”¨ `autoprefixer` è‡ªåŠ¨æ·»åŠ å‰ç¼€ï¼ˆå¦‚ `-webkit-`ã€`-ms-`ï¼‰
- ä½¿ç”¨ `postcss-preset-env` é™å®šè¯­æ³•ç‰ˆæœ¬
- é‡åˆ° `flex`, `grid`, `position: sticky` ç­‰è¡Œä¸ºä¸ä¸€è‡´æ—¶ï¼Œä½¿ç”¨ fallback æˆ– polyfill
- æ ·å¼å…¼å®¹æ€§è°ƒè¯•ä¼šä½¿ç”¨ [Can I use](https://caniuse.com) å’Œ DevTools æ¨¡æ‹Ÿå™¨

ğŸ“ çœŸå®ä¾‹å­ï¼š

> åœ¨é€‚é… iOS Safari æ—¶ï¼Œå‘ç° `vh` å•ä½åœ¨è½¯é”®ç›˜å¼¹å‡ºæ—¶ä¼šè¢«å‹ç¼©ï¼Œäºæ˜¯æ”¹ç”¨ `window.innerHeight` + JS è®¾ç½®é«˜åº¦ï¼Œè§£å†³ç§»åŠ¨ç«¯è·³åŠ¨é—®é¢˜ã€‚

JS API å…¼å®¹æ€§

- ä½¿ç”¨ `core-js` + `babel-polyfill` å¤„ç† `Promise`, `Array.prototype.includes`, `async/await` ç­‰æ–°ç‰¹æ€§å…¼å®¹
- æ ¹æ®ç›®æ ‡æµè§ˆå™¨é…ç½® `browserslist`ï¼Œè‡ªåŠ¨æ³¨å…¥å…¼å®¹è½¬æ¢
- é¿å…ä½¿ç”¨ä¸å…¼å®¹çš„ APIï¼ˆå¦‚ IE ä¸æ”¯æŒçš„ `classList.replace()`ï¼‰

çœŸå®ä¾‹å­ï¼š

> æŸæ¬¡åœ¨ä½¿ç”¨ `Object.fromEntries()` æ—¶ï¼ŒIE æŠ¥é”™ï¼ŒæŸ¥é˜…å‘ç°æ˜¯ ES2019 çš„ APIï¼Œä½¿ç”¨ `polyfill` æ›¿ä»£ã€‚

DOM è¡Œä¸ºå…¼å®¹

- ä½¿ç”¨äº‹ä»¶ä»£ç†æ›¿ä»£ä¸æ”¯æŒçš„äº‹ä»¶ï¼ˆå¦‚ `input`ã€`change` å·®å¼‚ï¼‰
- æ£€æŸ¥äº‹ä»¶å†’æ³¡è¡Œä¸ºå·®å¼‚ï¼ˆIE æœ‰äº›äº‹ä»¶ä¸å†’æ³¡ï¼‰
- Safari å¯¹ `preventDefault()` æœ‰æ—¶å€™éœ€è¦æ”¾åœ¨ `touchstart` è€Œä¸æ˜¯ `click`

4. ç§»åŠ¨ç«¯å…¼å®¹æ€§

- Android å¾®ä¿¡æµè§ˆå™¨å¯¹ `position: fixed` æ”¯æŒä¸ä¸€è‡´
- iOS æ»šåŠ¨ç©¿é€ç”¨ `touch-action`, `overflow: hidden`, `preventDefault` è”åˆè§£å†³
- Viewport å•ä½å…¼å®¹ï¼š`vh/vw` + çœŸå®è§†å£ + resize ç›‘å¬

5. WebView/å°ç¨‹åºå…¼å®¹æ€§

- WebView ç‰ˆæœ¬ç¢ç‰‡åŒ–ä¸¥é‡ï¼Œå¸¸éœ€è¦ä½¿ç”¨ JS Bridge æ£€æµ‹ç‰ˆæœ¬
- ä½¿ç”¨è‡ªå®šä¹‰ UA åˆ¤æ–­ï¼ˆæˆ– JSBridge èƒ½åŠ›æ¢æµ‹ï¼‰
- é’ˆå¯¹ä½ç‰ˆæœ¬ WebView åšèƒ½åŠ›é™çº§ï¼ˆå¦‚å–æ¶ˆåŠ¨ç”»ï¼‰

### å¼€å¯ä¸¥æ ¼æ¨¡å¼ï¼Œå®ƒçš„ä½œç”¨

å¼€å¯ JavaScript çš„ **ä¸¥æ ¼æ¨¡å¼ï¼ˆStrict Modeï¼‰** æ˜¯ä¸€ç§â€œæ›´ä¸¥æ ¼ã€æ›´å®‰å…¨çš„ JS è¿è¡Œæ¨¡å¼â€ï¼Œå®ƒå¯ä»¥å¸®åŠ©å¼€å‘è€…**å‡å°‘ bugã€ç¦æ­¢ä¸€äº›ä¸åˆç†ç”¨æ³•ã€å¢å¼ºå®‰å…¨æ€§**ï¼Œå¹¶å¯¹ ES6+ çš„æ¨¡å—åŒ–ã€Class ä½“ç³»å¥ å®šåŸºç¡€ã€‚

```js
"use strict"

// âŒ æœªå£°æ˜å˜é‡ç›´æ¥èµ‹å€¼ä¼šæŠ¥é”™
x = 10 // ReferenceError: x is not defined

// âŒ ä¸å…è®¸åˆ é™¤å˜é‡
var foo = 1
delete foo // SyntaxError

// âŒ å‡½æ•°å‚æ•°ä¸èƒ½é‡å
function test(a, a) {} // SyntaxError

// âœ… this ä¸å†æŒ‡å‘ window
function showThis() {
  console.log(this) // undefined
}
showThis()
```

######

## å…¶ä»–

### å¦‚ä½•ç©¿é€é­ç½©å±‚

1. é¡µé¢ä¸Šæœ‰ä¸€ä¸ªæŒ‰é’®ï¼ŒæŒ‰é’®ä¸Šå±‚è¿˜æœ‰å±‚é­ç½©å±‚ï¼Œå¦‚ä½•ç‚¹å‡»ç©¿é€é®ç½©ï¼Œç‚¹ å‡»åˆ°æŒ‰é’®

ç»™é®ç½©å±‚è®¾ç½® `pointer-events: none;`ï¼Œè¿™æ ·é®ç½©å±‚æœ¬èº«ä¸ä¼šå“åº”é¼ æ ‡äº‹ä»¶ï¼Œç‚¹å‡»äº‹ä»¶ä¼šç›´æ¥ä¼ é€’åˆ°åº•ä¸‹çš„

å…ƒç´ æ°¸è¿œä¸ä¼šæˆä¸ºé¼ æ ‡äº‹ä»¶çš„[target](https://developer.mozilla.org/zh-CN/docs/Web/API/Event/target)ã€‚ä½†æ˜¯ï¼Œå½“å…¶åä»£å…ƒç´ çš„`pointer-events`å±æ€§æŒ‡å®šå…¶ä»–å€¼æ—¶ï¼Œé¼ æ ‡äº‹ä»¶å¯ä»¥æŒ‡å‘åä»£å…ƒç´ ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œé¼ æ ‡äº‹ä»¶å°†åœ¨æ•è·æˆ–å†’æ³¡é˜¶æ®µè§¦å‘çˆ¶å…ƒç´ çš„äº‹ä»¶ä¾¦å¬å™¨ã€‚

### å¦‚ä½•å®ç°è·¯ç”±å®ˆå«

Vue Router å¦‚ä½•å®ç°è·¯ç”±å®ˆå«ï¼Œæ ¹æ®æ¡ä»¶æ‹¦æˆªæŸäº›è·¯ç”±è·³è½¬ï¼Œå¹¶é‡å®šå‘

```js
// router/index.js æˆ– main.js
router.beforeEach((to, from, next) => {
  // ä¸¾ä¾‹ï¼šæ ¹æ®ç™»å½•çŠ¶æ€å†³å®šæ˜¯å¦å…è®¸è®¿é—®æŸäº›è·¯ç”±
  const isLoggedIn = false; // ä½ çš„ç™»å½•åˆ¤æ–­é€»è¾‘

  if (to.meta.requiresAuth && !isLoggedIn) {
    // å¦‚æœç›®æ ‡è·¯ç”±éœ€è¦ç™»å½•ï¼Œä¸”æ²¡ç™»å½•ï¼Œé‡å®šå‘åˆ°ç™»å½•é¡µ
    next({ path: '/login' });
  } else {
    // å…è®¸è®¿é—®
    next();
  }
});


const routes = [
  {
    path: '/dashboard',
    component: Dashboard,
    meta: { requiresAuth: true },
  },
  {
    path: '/login',
    component: Login,
  },
];

toï¼šå³å°†è¦è¿›å…¥çš„è·¯ç”±å¯¹è±¡

fromï¼šå½“å‰å¯¼èˆªæ­£è¦ç¦»å¼€çš„è·¯ç”±

nextï¼šå¿…é¡»è°ƒç”¨ï¼Œå¦åˆ™é¡µé¢ä¸ä¼šè·³è½¬

è°ƒç”¨ next() è¡¨ç¤ºæ”¾è¡Œ
è°ƒç”¨ next('/login') æˆ– next({ path: '/login' }) è¡¨ç¤ºé‡å®šå‘
```

### å½“ URL çš„æŸ¥è¯¢åƒæ•°ï¼ˆquery åƒæ•°ï¼‰æœ¬èº«æ˜¯ä¸€ä¸ªç½‘ç»œåœ°å€è¦æ³¨æ„ä»€ä¹ˆï¼Ÿ

æŸ¥è¯¢å‚æ•°çš„å€¼ä¸­åŒ…å«ç‰¹æ®Šå­—ç¬¦ï¼ˆå¦‚ `:`ã€`/`ã€`?`ã€`&` ç­‰ï¼‰ä¼šç ´å URL çš„ç»“æ„ï¼Œå¯¼è‡´è§£æé”™è¯¯ã€‚

éœ€è¦ä½¿ç”¨ `encodeURIComponent` å¯¹æ•´ä¸ªç½‘ç»œåœ°å€è¿›è¡Œç¼–ç ï¼Œç¡®ä¿å®ƒèƒ½ä½œä¸ºä¸€ä¸ªæ•´ä½“å®‰å…¨åœ°æ”¾å…¥æŸ¥è¯¢å‚æ•°ä¸­ã€‚

åœ¨åç«¯æˆ–å‰ç«¯è·å–æŸ¥è¯¢å‚æ•°æ—¶ï¼Œè¦ç”¨ `decodeURIComponent` è¿˜åŸåŸå§‹çš„ç½‘ç»œåœ°å€ã€‚

### SHA256

> å¦‚æœæ‚¨æŒ‡çš„æ˜¯ SHA-256ï¼ˆæœ‰æ—¶ä¹Ÿç®€ç§°ä¸º H256ï¼‰ï¼Œé‚£å®ƒæ˜¯å¸¸ç”¨çš„å“ˆå¸Œç®—æ³•ä¹‹ä¸€ï¼Œå…·æœ‰ä¸å¯é€†ã€å®šé•¿è¾“å‡ºã€æŠ—ç¯¡æ”¹ç­‰ç‰¹ç‚¹ã€‚å‰ç«¯ä¸»è¦ç”¨äºå¯¹å¯†ç æˆ–æ•°æ®åšç­¾åã€æ‘˜è¦ç­‰ï¼Œæ¯”å¦‚ç™»å½•å‰å¯¹ç”¨æˆ·å¯†ç å“ˆå¸Œå¤„ç†ã€API ç­¾åæ ¡éªŒã€JWT çš„ HS256 ç­¾åç®—æ³•ç­‰ã€‚æˆ‘å¸¸ç”¨ js-sha256 æˆ– crypto.subtle æ¥å®ç°ã€‚

### Docker æ˜¯ä»€ä¹ˆï¼Ÿ

**Docker** æ˜¯ä¸€ä¸ªå¼€æºçš„å®¹å™¨åŒ–å¹³å°ï¼Œå…è®¸ä½ å°†åº”ç”¨å’Œå®ƒæ‰€ä¾èµ–çš„ç¯å¢ƒæ‰“åŒ…åˆ°ä¸€ä¸ªâ€œå®¹å™¨â€ä¸­ï¼Œä»è€Œå®ç°åº”ç”¨çš„ä¸€æ¬¡æ„å»ºï¼Œåˆ°å¤„è¿è¡Œã€‚

- **ä¸»è¦åŠŸèƒ½**ï¼š
  - æ‰“åŒ…åº”ç”¨åŠå…¶ä¾èµ–ï¼ˆä»£ç ã€åº“ã€ç¯å¢ƒå˜é‡ã€é…ç½®æ–‡ä»¶ç­‰ï¼‰
  - åœ¨ä»»ä½•æ”¯æŒ Docker çš„ç¯å¢ƒä¸­å¿«é€Ÿå¯åŠ¨åº”ç”¨å®¹å™¨
  - èµ„æºéš”ç¦»å’Œé«˜æ•ˆåˆ©ç”¨ï¼ˆæ¯”ä¼ ç»Ÿè™šæ‹Ÿæœºè½»é‡ï¼‰
- **åº”ç”¨åœºæ™¯**ï¼š
  - å¿«é€Ÿéƒ¨ç½²å’Œå‘å¸ƒåº”ç”¨
  - å¤šç¯å¢ƒä¸€è‡´æ€§ï¼ˆå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ï¼‰
  - å¾®æœåŠ¡æ¶æ„
  - æŒç»­é›†æˆä¸äº¤ä»˜ï¼ˆCI/CDï¼‰
- **ç‰¹ç‚¹**ï¼š
  - è½»é‡çº§è™šæ‹ŸåŒ–
  - é•œåƒï¼ˆImageï¼‰å’Œå®¹å™¨ï¼ˆContainerï¼‰ç®¡ç†
  - ä¸°å¯Œçš„ç”Ÿæ€å’Œç¤¾åŒºæ”¯æŒï¼ˆDocker Hub ç­‰ï¼‰

### ä»€ä¹ˆæ˜¯ WebRTC å’Œ webRTM

WebRTC (Web Real-Time Communication):

1. **WebRTCï¼ˆWeb Real-Time Communicationï¼‰** æ˜¯ä¸€å¥—ç”± W3C å’Œ IETF æ ‡å‡†åŒ–çš„æŠ€æœ¯ï¼Œå…è®¸ **æµè§ˆå™¨ä¹‹é—´æˆ–åŸç”Ÿåº”ç”¨ä¹‹é—´è¿›è¡Œå®æ—¶éŸ³è§†é¢‘é€šä¿¡å’Œæ•°æ®ä¼ è¾“**ï¼Œ**ä¸éœ€è¦å®‰è£…ä»»ä½•æ’ä»¶**ã€‚
2. ä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼š
   - éŸ³è§†é¢‘å®æ—¶ä¼ è¾“
   - ç‚¹å¯¹ç‚¹æ•°æ®ä¼ è¾“
   - éŸ³è§†é¢‘è®¾å¤‡è®¿é—®
   - å±å¹•å…±äº«
3. ä½¿ç”¨åœºæ™¯ï¼š
   - è§†é¢‘ä¼šè®®
   - åœ¨çº¿æ•™è‚²
   - è¿œç¨‹ååŠ©
   - å®æ—¶æ¸¸æˆ
4. æ ¸å¿ƒä¼˜åŠ¿ï¼š
   - æ— éœ€æ’ä»¶ï¼Œæµè§ˆå™¨åŸç”Ÿæ”¯æŒ
   - ä½å»¶è¿Ÿ
   - å®‰å…¨æ€§é«˜ï¼ˆå¼ºåˆ¶åŠ å¯†ï¼‰
   - å¼€æºå…è´¹

**WebRTM (Web Real-Time Messaging):**

1. WebRTM æ˜¯ä¸€ä¸ªå®æ—¶æ¶ˆæ¯ä¼ è¾“åè®®å’Œç³»ç»Ÿ
2. ä¸»è¦åŠŸèƒ½ï¼š
   - å®æ—¶æ¶ˆæ¯æ¨é€
   - åœ¨çº¿çŠ¶æ€åŒæ­¥
   - æ¶ˆæ¯é˜Ÿåˆ—
   - æ¶ˆæ¯æŒä¹…åŒ–
3. ä½¿ç”¨åœºæ™¯ï¼š
   - å³æ—¶é€šè®¯
   - å®æ—¶é€šçŸ¥
   - åœ¨çº¿åä½œ
   - å®æ—¶æ•°æ®åŒæ­¥
4. æ ¸å¿ƒä¼˜åŠ¿ï¼š
   - è½»é‡çº§
   - å¯æ‰©å±•æ€§å¼º
   - æ”¯æŒå¤šç§ä¼ è¾“åè®®
   - æ¶ˆæ¯å¯é æ€§ä¿è¯

ä¸»è¦åŒºåˆ«ï¼š

1. ç”¨é€”ä¸åŒï¼š
   - WebRTC ä¸»è¦ç”¨äºéŸ³è§†é¢‘é€šä¿¡å’Œå¤§é‡æ•°æ®çš„ç‚¹å¯¹ç‚¹ä¼ è¾“
   - WebRTM ä¸»è¦ç”¨äºæ–‡æœ¬æ¶ˆæ¯å’Œå°æ•°æ®åŒ…çš„å®æ—¶ä¼ è¾“
2. æ¶æ„ä¸åŒï¼š
   - WebRTC æ˜¯ç‚¹å¯¹ç‚¹æ¶æ„ï¼ˆP2Pï¼‰
   - WebRTM é€šå¸¸æ˜¯å®¢æˆ·ç«¯-æœåŠ¡å™¨æ¶æ„
3. æ•°æ®ä¼ è¾“ï¼š
   - WebRTC é€‚åˆå¤§æµé‡ã€ä½å»¶è¿Ÿçš„éŸ³è§†é¢‘æ•°æ®
   - WebRTM é€‚åˆå°æ•°æ®åŒ…çš„é«˜é¢‘ç‡ä¼ è¾“

è¿™ä¸¤ç§æŠ€æœ¯ç»å¸¸ä¼šç»“åˆä½¿ç”¨ï¼Œæ¯”å¦‚åœ¨è§†é¢‘ä¼šè®®ç³»ç»Ÿä¸­ï¼š

- WebRTC è´Ÿè´£éŸ³è§†é¢‘ä¼ è¾“
- WebRTM è´Ÿè´£ä¿¡ä»¤ä¼ è¾“å’Œåœ¨çº¿çŠ¶æ€åŒæ­¥

ğŸ§© WebRTC èƒ½å¹²å˜›ï¼Ÿ

- **å®æ—¶éŸ³è§†é¢‘é€šä¿¡**ï¼šå¦‚éŸ³è§†é¢‘é€šè¯ã€ä¼šè®®ç³»ç»Ÿï¼ˆZoomã€è…¾è®¯ä¼šè®®ã€Google Meetï¼‰
- **å®æ—¶æ•°æ®é€šé“**ï¼ˆ`RTCDataChannel`ï¼‰ï¼šç”¨äº P2P æ–‡ä»¶ä¼ è¾“ã€æ¸¸æˆåŒæ­¥ç­‰
- **å±å¹•å…±äº«**ï¼šå¦‚è¿œç¨‹åä½œã€æŠ•å±ç­‰

ğŸ›  WebRTC çš„æ ¸å¿ƒç»„æˆ

1. **getUserMedia()**
   è·å–æœ¬åœ°è®¾å¤‡çš„éŸ³è§†é¢‘æµï¼ˆéº¦å…‹é£ã€æ‘„åƒå¤´ã€å±å¹•ï¼‰
2. **RTCPeerConnection**
   å»ºç«‹æµè§ˆå™¨ä¹‹é—´çš„ P2P è¿æ¥ï¼Œä¼ è¾“éŸ³è§†é¢‘æµ
3. **RTCDataChannel**
   ä¼ è¾“ä»»æ„æ•°æ®ï¼ˆä¾‹å¦‚èŠå¤©æ¶ˆæ¯ã€æ–‡ä»¶ï¼‰
4. **ä¿¡ä»¤ï¼ˆSignalingï¼‰**
   ç”¨äºåå•†è¿æ¥ï¼ˆå¦‚äº¤æ¢ SDPã€ICE candidateï¼‰ï¼Œ**ä¸æ˜¯ WebRTC æ ‡å‡†çš„ä¸€éƒ¨åˆ†**ï¼Œå¸¸ç”¨ WebSocketã€è‡ªå®šä¹‰åè®®å®ç°

**WebRTC**ï¼šæµè§ˆå™¨ä¹‹é—´å¯ä»¥ç›´æ¥è§†é¢‘é€šè¯çš„æŠ€æœ¯

**getUserMedia**ï¼šè°ƒæ‘„åƒå¤´

**PeerConnection**ï¼šè®©ä¸¤ä¸ªæµè§ˆå™¨èƒ½è¯´è¯

**offer / answer**ï¼šåƒè°ˆæ‹çˆ±è¦å…ˆè¡¨ç™½ï¼Œå¦ä¸€æ–¹å›åº”ï¼Œç„¶åå»ºç«‹è¿æ¥

ğŸŒ ç®€å•è¿æ¥æµç¨‹å›¾

```text

ç”¨æˆ·A               ç”¨æˆ·B
 â”ƒ                   â”ƒ
 â”ƒ--getUserMedia()-->â”ƒ
 â”ƒ<--éŸ³è§†é¢‘æµ--------â”ƒ
 â”ƒ                   â”ƒ
 â”ƒ--Signalingé€šé“---->â”ƒ  ï¼ˆäº¤æ¢SDP/ICEï¼‰
 â”ƒ<--Signalingé€šé“----â”ƒ
 â”ƒ--å»ºç«‹RTCPeerConnection-->â”ƒ
 â”ƒ<---- P2P éŸ³è§†é¢‘é€šä¿¡ ----â”ƒ
```

```js
let localStream
let localVideo = document.getElementById("localVideo")
let remoteVideo = document.getElementById("remoteVideo")

let pc1, pc2 // ä¸¤ä¸ªâ€œç”¨æˆ·â€çš„æµè§ˆå™¨ Peer

async function start() {
  // 1. è·å–æœ¬åœ°æ‘„åƒå¤´
  localStream = await navigator.mediaDevices.getUserMedia({ video: true, audio: false })
  localVideo.srcObject = localStream

  // 2. åˆ›å»ºä¸¤ä¸ª PeerConnectionï¼ˆæœ¬åœ°æ¨¡æ‹Ÿä¸¤äººï¼‰
  pc1 = new RTCPeerConnection()
  pc2 = new RTCPeerConnection()

  // 3. æŠŠæœ¬åœ°è§†é¢‘æµåŠ åˆ° pc1
  localStream.getTracks().forEach((track) => {
    pc1.addTrack(track, localStream)
  })

  // 4. è®¾ç½® pc2 æ¥æ”¶åˆ°åª’ä½“æµæ—¶æ˜¾ç¤º
  pc2.ontrack = (event) => {
    remoteVideo.srcObject = event.streams[0]
  }

  // 5. æ¨¡æ‹Ÿä¿¡ä»¤äº¤æ¢
  const offer = await pc1.createOffer()
  await pc1.setLocalDescription(offer)
  await pc2.setRemoteDescription(pc1.localDescription)

  const answer = await pc2.createAnswer()
  await pc2.setLocalDescription(answer)
  await pc1.setRemoteDescription(pc2.localDescription)
}
```

ğŸ“¦ åº”ç”¨ä¸¾ä¾‹ï¼š

| åº”ç”¨             | WebRTC ç”¨æ³•                          |
| ---------------- | ------------------------------------ |
| è…¾è®¯ä¼šè®®         | å®æ—¶éŸ³è§†é¢‘ä¼ è¾“                       |
| è…¾è®¯æ–‡æ¡£åä½œ     | ç”¨ RTCDataChannel åšååŒæ•°æ®ä¼ è¾“     |
| æ–‡ä»¶ P2P å…±äº«    | ä½¿ç”¨ WebRTC + DataChannel ä¼ è¾“å¤§æ–‡ä»¶ |
| æ¸¸æˆåŒæ­¥çŠ¶æ€ä¼ è¾“ | ä½å»¶è¿Ÿé€šä¿¡ï¼Œé…åˆ WebSocket åšåŒæ­¥    |

### git stash

```bash
# 1. ä¿å­˜å½“å‰æ‰€æœ‰ä¿®æ”¹ï¼ˆä¸æƒ³æäº¤ï¼Œä½†è¦åˆ‡æ¢åˆ†æ”¯ï¼‰
git stash

# 2. æŸ¥çœ‹ stash åˆ—è¡¨
git stash list
# è¾“å‡ºç¤ºä¾‹ï¼š
# stash@{0}: WIP on dev: 8372d7e ä¿®æ”¹äº†ç™»å½•åŠŸèƒ½

# 3. åº”ç”¨å¹¶æ¸…é™¤æœ€è¿‘ä¸€æ¬¡
git stash pop

# æˆ–åªåº”ç”¨ï¼Œä¸æ¸…é™¤
git stash apply

# 4. åˆ é™¤æŸä¸€æ¡ stash
git stash drop stash@{0}

```

### ç»§æ‰¿

1. class A ç»§æ‰¿è‡ª class Bï¼ŒA å’Œ B æœ‰ä¸€ä¸ªåŒåçš„æ–¹æ³•ï¼šgetNameï¼Œé‚£ä¹ˆ A çš„å®ä¾‹è°ƒç”¨ getName æ˜¯å¦ä¼šæ‰§è¡Œ B çš„ getName

```text
JavaScript ä¸­çš„ç±»ç»§æ‰¿åŸºäºåŸå‹é“¾ï¼Œå½“å­ç±»ä¸çˆ¶ç±»æœ‰åŒåæ–¹æ³•æ—¶ï¼Œå­ç±»æ–¹æ³•ä¼šâ€œè¦†ç›–â€çˆ¶ç±»æ–¹æ³•ã€‚æ–¹æ³•æŸ¥æ‰¾éµå¾ªæœ€è¿‘ä¼˜å…ˆåŸåˆ™ï¼Œä¹Ÿå°±æ˜¯â€œå…ˆæŸ¥è‡ªå·±ï¼Œå†å¾€åŸå‹é“¾ä¸ŠæŸ¥â€ï¼Œæ‰€ä»¥ A çš„å®ä¾‹è°ƒç”¨ getName() æ—¶ï¼Œåªä¼šæ‰§è¡Œ A è‡ªå·±çš„ç‰ˆæœ¬ã€‚
// å¦‚ä½•è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•ï¼Ÿ
ä½ å¯ä»¥æ‰‹åŠ¨è°ƒç”¨ super.getName() æ¥æ‰§è¡Œ B çš„æ–¹æ³•ï¼š
```

## é¡¹ç›®

### å‰ç«¯æ¸²æŸ“ 3d æ•°å­—äººï¼Œæœ‰ä»€ä¹ˆæ–¹æ¡ˆ/æ€è·¯

| ç±»å‹                         | æŠ€æœ¯æ ˆ                    | ç‰¹ç‚¹                                         | é€‚ç”¨åœºæ™¯                    |
| ---------------------------- | ------------------------- | -------------------------------------------- | --------------------------- |
| Three.js + GLTF æ¨¡å‹         | WebGL åº•å±‚æ¸²æŸ“ï¼Œå¹¿æ³›åº”ç”¨  | æ€§èƒ½å¼ºå¤§ï¼Œç¤¾åŒºæˆç†Ÿï¼Œæ”¯æŒéª¨éª¼åŠ¨ç”»ã€ç¯å…‰ã€è´´å›¾ | å¤šæ•° Web3D é¡¹ç›®ã€è™šæ‹Ÿäººå±•ç¤º |
| Babylon.js                   | é«˜æ€§èƒ½ 3D å¼•æ“            | æ›´åæ¸¸æˆ/åœºæ™¯æ¸²æŸ“ï¼Œæ”¯æŒ PBR                  | æ¸¸æˆå¼äº¤äº’ã€é«˜ä¿çœŸæ•°å­—äºº    |
| Unity WebGL å‘å¸ƒ             | Unity æ„å»ºååµŒå…¥ç½‘é¡µ      | é«˜è¿˜åŸåº¦ï¼Œä½†åŒ…å¤§ï¼ŒåŠ è½½æ…¢                     | é«˜ç²¾åº¦æ•°å­—äººã€å¤šäººäº’åŠ¨      |
| WebGPUï¼ˆæ–°æ ‡å‡†ï¼‰+ PlayCanvas | æ–°ä¸€ä»£ GPU æ¥å£ï¼Œæ€§èƒ½æ›´é«˜ | å‰æ²¿æŠ€æœ¯ï¼Œé€‚é…è¾ƒå°‘è®¾å¤‡                       | é«˜ç«¯è®¾å¤‡ã€å®éªŒæ€§äº§å“        |
| Sora + WebRTC è§†é¢‘ç”Ÿæˆ       | é€šè¿‡äº‘æ¸²æŸ“ + è§†é¢‘æµæ¨é€   | ä¸ä¾èµ–å‰ç«¯ç®—åŠ›ï¼Œç”»è´¨ä½³                       | AI æ•°å­—äººç›´æ’­/è®²è§£          |
| iframe + äº‘æ¸²æŸ“åµŒå…¥          | ä»äº‘ç«¯å®æ—¶ç”Ÿæˆç”»é¢æµ      | èƒ½åŠ è½½è¶…é«˜æ¨¡å‹ï¼Œæ”¯æŒäº¤äº’                     | é‡åœºæ™¯æ•°å­—äºº                |
| 2.5D Live2D                  | è½»é‡åŠ¨ç”»ï¼Œé€‚åˆå¡é€šé£      | ç±»ä¼¼ VTuber é£æ ¼                             | è™šæ‹Ÿå®¢æœã€è½»äº¤äº’å±•ç¤º        |

### ä»å¼€å‘åˆ°ä¸Šçº¿ï¼Œå¦‚ä½•åšå¥½åˆ†æ”¯ç®¡ç†

```TEXT
1. ä» develop æ‹‰ feature åˆ†æ”¯ â†’ å¼€å‘ â†’ æœ¬åœ°è‡ªæµ‹ âœ…
2. åˆå¹¶åˆ° developï¼ˆæäº¤ PR / MRï¼‰â†’ è§¦å‘é›†æˆç¯å¢ƒ CI/CD
3. å¤šä¸ªåŠŸèƒ½å®Œæˆåï¼Œåˆ›å»º release åˆ†æ”¯ â†’ è”è°ƒæµ‹è¯•ï¼ˆUATï¼‰
4. éªŒæ”¶æ— è¯¯åï¼Œrelease åˆå¹¶åˆ° main & develop
5. main è§¦å‘ç”Ÿäº§éƒ¨ç½²
6. çº¿ä¸Šé—®é¢˜ï¼Œç”¨ hotfix å¤„ç† â†’ åˆå¹¶ main & develop
```

### Node èƒ½å¦åˆ©ç”¨å¤šæ ¸å¤„ç†å™¨ï¼Ÿ

`child_process` æ¨¡å—ï¼ˆæ›´çµæ´»ï¼‰

ç”¨äºæ‰‹åŠ¨åˆ›å»ºå­è¿›ç¨‹ï¼ˆå­ä»»åŠ¡ï¼‰ï¼Œé€‚ç”¨äºï¼š

- æ‰§è¡Œ CPU å¯†é›†ä»»åŠ¡
- æ‰§è¡Œå¼‚æ­¥è„šæœ¬ã€çˆ¬è™«ã€å›¾åƒå¤„ç†ç­‰

```JS

const { fork } = require('child_process');

const childCount = 3;  // å¯åŠ¨3ä¸ªå­è¿›ç¨‹
const children = [];

for (let i = 0; i < childCount; i++) {
  const child = fork('./child.js');

  child.on('message', (msg) => {
    console.log(`Master received from child ${i}:`, msg);
  });

  child.on('exit', (code) => {
    console.log(`Child ${i} exited with code ${code}`);
  });

  // å‘é€æ¶ˆæ¯ç»™å­è¿›ç¨‹å¯åŠ¨å·¥ä½œ
  child.send(`Hello child ${i}`);

  children.push(child);
}

// child.js
process.on('message', (msg) => {
  console.log(`Child received message: ${msg}`);
  // æ¨¡æ‹Ÿè€—æ—¶ä»»åŠ¡
  setTimeout(() => {
    process.send(`Child done with message: ${msg}`);
    process.exit(0);
  }, 1000 + Math.random() * 2000);
});

```

ğŸ“Œ ç‰¹ç‚¹ï¼š

- å­è¿›ç¨‹é—´é€šè¿‡ `send` é€šä¿¡ï¼ˆåŸºäº IPC é€šé“ï¼‰
- æ›´é€‚åˆä¸šåŠ¡å­ä»»åŠ¡å¤„ç†ï¼Œè€Œä¸æ˜¯æœåŠ¡ç›‘å¬

######
